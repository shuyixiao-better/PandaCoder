D:\Program_Files\JDK\jdk-17_windows-x64_bin\jdk-17.0.6\bin\java.exe -XX:TieredStopAtLevel=1 -Dspring.output.ansi.enabled=always -Dcom.sun.management.jmxremote -Dspring.jmx.enabled=true -Dspring.liveBeansView.mbeanDomain -Dspring.application.admin.enabled=true "-Dmanagement.endpoints.jmx.exposure.include=*" -javaagent:D:\ProgramDevs\gradleRepo\caches\modules-2\files-2.1\com.jetbrains.intellij.idea\ideaIU\2024.1.6\704afc61510100de63d5d627532a78582e4ac406\ideaIU-2024.1.6\lib\idea_rt.jar=62870:D:\ProgramDevs\gradleRepo\caches\modules-2\files-2.1\com.jetbrains.intellij.idea\ideaIU\2024.1.6\704afc61510100de63d5d627532a78582e4ac406\ideaIU-2024.1.6\bin -Dfile.encoding=UTF-8 @C:\Users\ShuYixiao\AppData\Local\Temp\idea_arg_file1351700637 com.torchv.TorchVBotServerApplication

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v3.1.9)

2025-10-19 11:42:58,326 INFO (Version.java:21)- HV000001: Hibernate Validator 8.0.1.Final
2025-10-19 11:42:58,347 INFO (StartupInfoLogger.java:51)- Starting TorchVBotServerApplication using Java 17.0.6 with PID 2128 (E:\Project\hzmj\ais-server\target\classes started by ShuYixiao in E:\Project\hzmj\ais-server)
2025-10-19 11:42:58,347 DEBUG (StartupInfoLogger.java:52)- Running with Spring Boot v3.1.9, Spring v6.0.17
2025-10-19 11:42:58,348 INFO (SpringApplication.java:644)- The following 1 profile is active: "dev"
2025-10-19 11:42:59,676 INFO (RepositoryConfigurationDelegate.java:291)- Multiple Spring Data modules found, entering strict repository configuration mode
2025-10-19 11:42:59,677 INFO (RepositoryConfigurationDelegate.java:138)- Bootstrapping Spring Data Elasticsearch repositories in DEFAULT mode.
2025-10-19 11:42:59,779 INFO (RepositoryConfigurationDelegate.java:207)- Finished Spring Data repository scanning in 100 ms. Found 0 Elasticsearch repository interfaces.
2025-10-19 11:42:59,782 INFO (RepositoryConfigurationDelegate.java:291)- Multiple Spring Data modules found, entering strict repository configuration mode
2025-10-19 11:42:59,782 INFO (RepositoryConfigurationDelegate.java:138)- Bootstrapping Spring Data Reactive Elasticsearch repositories in DEFAULT mode.
2025-10-19 11:42:59,820 INFO (RepositoryConfigurationDelegate.java:207)- Finished Spring Data repository scanning in 38 ms. Found 0 Reactive Elasticsearch repository interfaces.
2025-10-19 11:42:59,826 INFO (RepositoryConfigurationDelegate.java:291)- Multiple Spring Data modules found, entering strict repository configuration mode
2025-10-19 11:42:59,826 INFO (RepositoryConfigurationDelegate.java:138)- Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-10-19 11:42:59,866 INFO (RepositoryConfigurationDelegate.java:207)- Finished Spring Data repository scanning in 36 ms. Found 0 Redis repository interfaces.
2025-10-19 11:43:00,043 INFO (GenericScope.java:282)- BeanFactory id=3d8121e9-7f3a-316c-9896-6574e1a85727
2025-10-19 11:43:00,636 INFO (TomcatWebServer.java:108)- Tomcat initialized with port(s): 10003 (http)
2025-10-19 11:43:00,641 INFO (DirectJDKLog.java:173)- Initializing ProtocolHandler ["http-nio-10003"]
2025-10-19 11:43:00,642 INFO (DirectJDKLog.java:173)- Starting service [Tomcat]
2025-10-19 11:43:00,642 INFO (DirectJDKLog.java:173)- Starting Servlet engine: [Apache Tomcat/10.1.19]
2025-10-19 11:43:00,754 INFO (DirectJDKLog.java:173)- Initializing Spring embedded WebApplicationContext
2025-10-19 11:43:00,754 INFO (ServletWebServerApplicationContext.java:291)- Root WebApplicationContext: initialization completed in 2383 ms
2025-10-19 11:43:00,855 INFO (AsyncConfig.java:60)- CorsFilter init
2025-10-19 11:43:00,892 DEBUG (GlobalRequestMapping.java:39)- GlobalRequestMapping Filter init......
2025-10-19 11:43:01,427 WARN (AbstractMethod.java:411)- [com.torchv.repository.chat.mapper.SensitiveWordMapper.insert] Has been loaded by XML or SqlProvider or Mybatis's Annotation, so ignoring this injection for [class com.baomidou.mybatisplus.core.injector.methods.Insert]
 _ _   |_  _ _|_. ___ _ |    _
| | |\/|_)(_| | |_\  |_)||_|_\
     /               |
                        3.5.5
2025-10-19 11:43:02,211 INFO (Version.java:43)- Redisson 3.27.1
2025-10-19 11:43:02,433 INFO (ConnectionsHolder.java:191)- 1 connections initialized for 10.10.0.15/10.10.0.15:30572
2025-10-19 11:43:02,477 INFO (ConnectionsHolder.java:191)- 24 connections initialized for 10.10.0.15/10.10.0.15:30572
2025-10-19 11:43:04,063 INFO (DingTalkStreamManager.java:32)- 钉钉Stream管理器初始化完成，已注册事件监听器
2025-10-19 11:43:04,253 INFO (RabbitMQRegister.java:50)- Dynamic Register RabbitMQ Queue
2025-10-19 11:43:04,290 INFO (ShedLockConfiguration.java:59)- jdbc-url:jdbc:mysql://10.10.0.21:3306/db_dev_ais?zeroDateTimeBehavior=convertToNull&useUnicode=true&characterEncoding=utf-8&autoReconnect=true&useSSL=false&allowPublicKeyRetrieval=true
2025-10-19 11:43:04,292 INFO (ShedLockConfiguration.java:50)- lock-db-type:MY_SQL
SA [INFO] -->: 全局配置 SaTokenConfig [tokenName=token, timeout=604800, activeTimeout=28800, dynamicActiveTimeout=false, isConcurrent=true, isShare=false, maxLoginCount=12, maxTryTimes=12, isReadBody=true, isReadHeader=true, isReadCookie=true, isWriteHeader=true, tokenStyle=uuid, dataRefreshPeriod=30, tokenSessionCheckLogin=true, autoRenew=true, tokenPrefix=null, isPrint=false, isLog=true, logLevel=trace, logLevelInt=1, isColorLog=true, jwtSecretKey=null, basic=, currDomain=null, sameTokenTimeout=86400, checkSameToken=false, cookie=SaCookieConfig [domain=null, path=null, secure=false, httpOnly=false, sameSite=null], sign=SaSignConfig [secretKey=null, timestampDisparity=900000, isCheckNonce=true]]
SA [INFO] -->: 全局组件 SaTokenDao 载入成功: cn.dev33.satoken.dao.SaTokenDaoRedisJackson
SA [INFO] -->: 全局组件 StpInterface 载入成功: com.torchv.system.security.StpInterfaceImpl
SA [INFO] -->: 全局组件 SaTokenContext 载入成功: cn.dev33.satoken.spring.SaTokenContextForSpringInJakartaServlet
SA [INFO] -->: 全局组件 SaJsonTemplate 载入成功: cn.dev33.satoken.spring.json.SaJsonTemplateForJackson
2025-10-19 11:43:05,194 INFO (EndpointLinksResolver.java:58)- Exposing 1 endpoint(s) beneath base path '/actuator'
2025-10-19 11:43:05,278 WARN (LocalVariableTableParameterNameDiscoverer.java:123)- Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: org.springframework.amqp.rabbit.core.RabbitAdmin
2025-10-19 11:43:05,286 INFO (DirectJDKLog.java:173)- Starting ProtocolHandler ["http-nio-10003"]
2025-10-19 11:43:05,293 INFO (TomcatWebServer.java:220)- Tomcat started on port(s): 10003 (http) with context path ''
2025-10-19 11:43:05,525 INFO (AbstractConnectionFactory.java:630)- Attempting to connect to: [localhost:5672]
2025-10-19 11:43:05,552 INFO (AbstractConnectionFactory.java:581)- Created new connection: rabbitConnectionFactory#763960eb:0/SimpleConnection@579325f2 [delegate=amqp://torchv@127.0.0.1:5672/, localPort=63374]
2025-10-19 11:43:05,800 INFO (FeedBackListener.java:48)- 处理问答反馈板块的MQ消息
2025-10-19 11:43:05,800 INFO (FeedMessageServiceImpl.java:58)- 处理问答反馈板块MQ消息，appid为空
2025-10-19 11:43:05,807 INFO (FeedBackListener.java:48)- 处理问答反馈板块的MQ消息
2025-10-19 11:43:05,807 INFO (FeedMessageServiceImpl.java:58)- 处理问答反馈板块MQ消息，appid为空
2025-10-19 11:43:05,925 INFO (StartupInfoLogger.java:57)- Started TorchVBotServerApplication in 8.012 seconds (process running for 8.574)
2025-10-19 11:43:05,930 INFO (DingTalkBootstrap.java:35)- 钉钉机器人管理器启动开始...
2025-10-19 11:43:05,930 INFO (DingTalkBootstrap.java:37)- 启动时钉钉连接数: 0
2025-10-19 11:43:05,930 INFO (DingTalkBootstrap.java:47)- 钉钉机器人管理器启动完成，当前连接数: 0
2025-10-19 11:43:05,930 INFO (DingTalkBootstrap.java:55)- 开始通过Service层恢复钉钉连接...
2025-10-19 11:43:05,931 INFO (DbRunner.java:39)- 加载数据源
2025-10-19 11:43:05,931 INFO (ChannelDingTalkServiceImpl.java:179)- 开始从数据库恢复所有钉钉连接...
2025-10-19 11:43:05,931 INFO (LicenseRunner.java:23)- 系统启动，License验证开始...
2025-10-19 11:43:05,932 INFO (LicenseManager.java:50)- 加载License验证器: com.torchv.infra.license.client.LicenseDeveloperLicenseValidator
2025-10-19 11:43:05,933 INFO (TorchVBotServerApplication.java:48)-
----------------------------------------------------------
	Application 'torchv-bot-server' is running! Access URLs:
	Local: 		http://localhost:10003
	External: 	http://10.10.0.153:10003
	Doc: 	http://10.10.0.153:10003/doc.html
	----------------------------------------------------------
2025-10-19 11:43:05,967 INFO (HikariDataSource.java:110)- HikariFamilyRoot - Starting...
2025-10-19 11:43:06,085 INFO (HikariPool.java:565)- HikariFamilyRoot - Added connection com.mysql.cj.jdbc.ConnectionImpl@20517be0
2025-10-19 11:43:06,088 INFO (HikariDataSource.java:123)- HikariFamilyRoot - Start completed.
2025-10-19 11:43:06,093 DEBUG (BaseJdbcLogger.java:135)- ==>  Preparing: SELECT id,creator,create_time,modifier,modifier_time,sort,tenant_id,appid,type,client_id,client_secret,client_code FROM app_channel_dingtalk
2025-10-19 11:43:06,104 DEBUG (BaseJdbcLogger.java:135)- ==> Parameters:
2025-10-19 11:43:06,116 DEBUG (BaseJdbcLogger.java:135)- <==      Total: 1
2025-10-19 11:43:06,120 INFO (ChannelDingTalkServiceImpl.java:192)- 找到 1 个钉钉机器人配置，开始重建连接...
2025-10-19 11:43:06,120 INFO (ChannelDingTalkServiceImpl.java:200)- 正在恢复钉钉连接: tenantId=1945137688931860480, appId=tv_d86ec7a6aa204fe994675ebdbf51ef60, clientId=dinggicb7jn8comi7xrj
2025-10-19 11:43:06,120 INFO (DingTalkConfigurationManager.java:33)- 绑定钉钉机器人配置: tenantId=1945137688931860480, appId=tv_d86ec7a6aa204fe994675ebdbf51ef60, clientId=dinggicb7jn8comi7xrj
2025-10-19 11:43:06,121 INFO (DingTalkConfigurationManager.java:47)- 准备发布钉钉绑定配置事件: 1945137688931860480:tv_d86ec7a6aa204fe994675ebdbf51ef60
2025-10-19 11:43:06,121 INFO (DingTalkStreamManager.java:41)- ========== 收到钉钉配置变更事件: BIND - 1945137688931860480:tv_d86ec7a6aa204fe994675ebdbf51ef60 ==========
2025-10-19 11:43:06,122 INFO (DingTalkStreamManager.java:70)- 开始处理钉钉绑定事件: 1945137688931860480:tv_d86ec7a6aa204fe994675ebdbf51ef60
2025-10-19 11:43:06,122 INFO (DingTalkStreamDiagnostics.java:79)- ========== 检查Stream连接前置条件 ==========
2025-10-19 11:43:06,122 INFO (DingTalkStreamDiagnostics.java:90)- ✅ ClientId格式正常 (长度: 20)
2025-10-19 11:43:06,122 INFO (DingTalkStreamDiagnostics.java:100)- ✅ ClientSecret格式正常 (长度: 64)
2025-10-19 11:43:06,122 INFO (DingTalkStreamDiagnostics.java:108)- ✅ TenantId: 1945137688931860480
2025-10-19 11:43:06,122 INFO (DingTalkStreamDiagnostics.java:116)- ✅ AppId: tv_d86ec7a6aa204fe994675ebdbf51ef60
2025-10-19 11:43:06,122 INFO (DingTalkStreamDiagnostics.java:119)- ========== 前置条件检查完成: 通过 ==========
2025-10-19 11:43:06,123 INFO (DingTalkStreamManager.java:93)- ✅  创建Stream连接
2025-10-19 11:43:06,123 INFO (DingTalkStreamManager.java:99)- 设置线程上下文类加载器: jdk.internal.loader.ClassLoaders$AppClassLoader -> jdk.internal.loader.ClassLoaders$AppClassLoader
2025-10-19 11:43:06,123 INFO (DingTalkStreamManager.java:105)- 准备创建钉钉Stream连接: 1945137688931860480:tv_d86ec7a6aa204fe994675ebdbf51ef60
2025-10-19 11:43:06,123 INFO (DingTalkStreamFactory.java:35)- 创建钉钉Stream客户端: tenantId=1945137688931860480, appId=tv_d86ec7a6aa204fe994675ebdbf51ef60, clientId=dinggicb7jn8comi7xrj
2025-10-19 11:43:06,130 INFO (DingTalkStreamManager.java:114)- 钉钉Stream客户端创建成功，准备启动: 1945137688931860480:tv_d86ec7a6aa204fe994675ebdbf51ef60
2025-10-19 11:43:06,130 INFO (DingTalkStreamDiagnostics.java:23)- ========== 开始诊断Stream客户端: 1945137688931860480:tv_d86ec7a6aa204fe994675ebdbf51ef60 ==========
2025-10-19 11:43:06,130 INFO (DingTalkStreamDiagnostics.java:32)- ✅ 客户端对象存在: com.dingtalk.open.app.api.OpenDingTalkStreamClient
2025-10-19 11:43:06,130 INFO (DingTalkStreamDiagnostics.java:38)- 客户端可用方法数: 11
2025-10-19 11:43:06,130 INFO (DingTalkStreamDiagnostics.java:54)- 客户端字段数: 9
2025-10-19 11:43:06,130 INFO (DingTalkStreamDiagnostics.java:60)-   发现关键字段: credential (类型: DingTalkCredential)
2025-10-19 11:43:06,130 INFO (DingTalkStreamDiagnostics.java:70)- ========== 诊断完成 ==========
2025-10-19 11:43:06,131 INFO (DingTalkConnectionRegistry.java:50)- 钉钉连接已注册: 1945137688931860480:tv_d86ec7a6aa204fe994675ebdbf51ef60
2025-10-19 11:43:06,131 INFO (DingTalkStreamManager.java:124)- 开始启动钉钉Stream客户端: 1945137688931860480:tv_d86ec7a6aa204fe994675ebdbf51ef60
2025-10-19 11:43:06,133 INFO (DingTalkStreamManager.java:126)- ✅ 钉钉Stream连接启动成功: 1945137688931860480:tv_d86ec7a6aa204fe994675ebdbf51ef60
2025-10-19 11:43:06,133 INFO (DingTalkStreamManager.java:136)- 钉钉Stream连接绑定成功: 1945137688931860480:tv_d86ec7a6aa204fe994675ebdbf51ef60
2025-10-19 11:43:06,133 INFO (DingTalkStreamManager.java:140)- 恢复线程上下文类加载器: jdk.internal.loader.ClassLoaders$AppClassLoader
2025-10-19 11:43:06,133 INFO (DingTalkConfigurationManager.java:49)- 钉钉绑定配置事件已发布: 1945137688931860480:tv_d86ec7a6aa204fe994675ebdbf51ef60
2025-10-19 11:43:06,203 INFO (DirectJDKLog.java:173)- Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-10-19 11:43:06,203 INFO (FrameworkServlet.java:532)- Initializing Servlet 'dispatcherServlet'
2025-10-19 11:43:06,206 INFO (FrameworkServlet.java:554)- Completed initialization in 2 ms
2025-10-19 11:43:06,326 DEBUG (RequestLogger.java:58)- request [GET http://10.10.0.210:9222/_cluster/health] returned [HTTP/1.1 200 OK]
2025-10-19 11:43:06,326 DEBUG (RequestLogger.java:58)- request [GET http://10.10.0.210:9222/_cluster/health] returned [HTTP/1.1 200 OK]
2025-10-19 11:43:06,326 DEBUG (RequestLogger.java:58)- request [GET http://10.10.0.210:9222/_cluster/health] returned [HTTP/1.1 200 OK]
2025-10-19 11:43:06,326 TRACE (RequestLogger.java:90)- curl -iX GET 'http://10.10.0.210:9222/_cluster/health'
# HTTP/1.1 200 OK
# X-elastic-product: Elasticsearch
# content-type: application/vnd.elasticsearch+json;compatible-with=8
# content-length: 437
#
# {"cluster_name":"elasticsearch","status":"yellow","timed_out":false,"number_of_nodes":1,"number_of_data_nodes":1,"active_primary_shards":104,"active_shards":104,"relocating_shards":0,"initializing_shards":0,"unassigned_shards":15,"unassigned_primary_shards":0,"delayed_unassigned_shards":0,"number_of_pending_tasks":0,"number_of_in_flight_fetch":0,"task_max_waiting_in_queue_millis":0,"active_shards_percent_as_number":87.39495798319328}
2025-10-19 11:43:06,326 TRACE (RequestLogger.java:90)- curl -iX GET 'http://10.10.0.210:9222/_cluster/health'
# HTTP/1.1 200 OK
# X-elastic-product: Elasticsearch
# content-type: application/vnd.elasticsearch+json;compatible-with=8
# content-length: 437
#
# {"cluster_name":"elasticsearch","status":"yellow","timed_out":false,"number_of_nodes":1,"number_of_data_nodes":1,"active_primary_shards":104,"active_shards":104,"relocating_shards":0,"initializing_shards":0,"unassigned_shards":15,"unassigned_primary_shards":0,"delayed_unassigned_shards":0,"number_of_pending_tasks":0,"number_of_in_flight_fetch":0,"task_max_waiting_in_queue_millis":0,"active_shards_percent_as_number":87.39495798319328}
2025-10-19 11:43:06,477 INFO (NettyInternalLogger.java:16)- [DingTalk] start websocket connection, uri=wss://wss-open-connection.dingtalk.com:443/connect
2025-10-19 11:43:06,843 INFO (NettyInternalLogger.java:16)- [DingTalk] connection is established, connectionId=b942b067-ac9d-11f0-b7a2-faf2d53e39a8
2025-10-19 11:43:07,145 INFO (ChannelDingTalkServiceImpl.java:213)- 钉钉连接恢复成功: tenantId=1945137688931860480, appId=tv_d86ec7a6aa204fe994675ebdbf51ef60
2025-10-19 11:43:07,145 INFO (ChannelDingTalkServiceImpl.java:228)- 钉钉连接恢复完成: 成功=1, 失败=0, 总计=1
2025-10-19 11:43:07,145 INFO (DingTalkBootstrap.java:61)- 钉钉连接恢复成功: 钉钉连接恢复完成: 成功=1, 失败=0, 总计=1
2025-10-19 11:43:11,208 INFO (NettyInternalLogger.java:16)- [DingTalk] start websocket connection, uri=wss://wss-open-connection.dingtalk.com:443/connect
2025-10-19 11:43:11,330 INFO (NettyInternalLogger.java:16)- [DingTalk] connection is established, connectionId=bc194459-ac9d-11f0-b7a2-faf2d53e39a8
2025-10-19 11:43:16,217 INFO (NettyInternalLogger.java:16)- [DingTalk] start websocket connection, uri=wss://wss-open-connection.dingtalk.com:443/connect
2025-10-19 11:43:16,333 INFO (NettyInternalLogger.java:16)- [DingTalk] connection is established, connectionId=bf146dd4-ac9d-11f0-80bd-52afbb2bd5e8
2025-10-19 11:43:16,217 INFO (NettyInternalLogger.java:16)- [DingTalk] start websocket connection, uri=wss://wss-open-connection.dingtalk.com:443/connect
2025-10-19 11:43:16,333 INFO (NettyInternalLogger.java:16)- [DingTalk] connection is established, connectionId=bf146dd4-ac9d-11f0-80bd-52afbb2bd5e8
2025-10-19 11:43:21,214 INFO (NettyInternalLogger.java:16)- [DingTalk] start websocket connection, uri=wss://wss-open-connection.dingtalk.com:443/connect
2025-10-19 11:43:21,329 INFO (NettyInternalLogger.java:16)- [DingTalk] connection is established, connectionId=c210470d-ac9d-11f0-8d8a-de809d1c6511
2025-10-19 11:44:34,885 INFO (PlatformAuthServiceImpl.java:66)- PlatformAuthServiceImpl.check,uri:/kl/api/saas/element/list
2025-10-19 11:44:34,916 INFO (KnowledgeElementController.java:176)- 分页查询知识库元素,API:/kl/api/saas/element/list,page:1,size:999999
2025-10-19 11:44:34,918 INFO (KnowledgeElementController.java:177)- 查询条件Vo:KnowledgeElementQueryReq(containerId=1945410884406898688, category=null, parentCode=0, eleName=null, processStatus=null, sortRule=0, sortType=1, pageCode=null)
2025-10-19 11:44:34,918 INFO (KnowledgeElementServiceImpl.java:426)- 分页查询知识库元素列表,pageNo:1,pageSize:999999
2025-10-19 11:44:34,918 INFO (KnowledgeElementServiceImpl.java:427)- 分页QueryReq:KnowledgeElementQueryReq(containerId=1945410884406898688, category=null, parentCode=0, eleName=null, processStatus=null, sortRule=0, sortType=1, pageCode=null)
2025-10-19 11:44:34,937 DEBUG (BaseJdbcLogger.java:135)- ==>  Preparing: select ku.user_code,ku.department_code,kd.name,kd.full_path,kd.type from kb_department_user ku left join kb_department kd on ku.department_code=kd.`code` where ku.tenant_id=? and ku.user_code=?
2025-10-19 11:44:34,938 DEBUG (BaseJdbcLogger.java:135)- ==> Parameters: 1943230203698479104(String), 1943230204135182336(String)
2025-10-19 11:44:34,941 DEBUG (BaseJdbcLogger.java:135)- <==      Total: 1
2025-10-19 11:44:34,947 DEBUG (BaseJdbcLogger.java:135)- ==>  Preparing: select element_code from saas_knowledge_element_permission where tenant_id=? and element_code in ( SELECT code from saas_knowledge_element where tenant_id=? and container_id=? and parent_code=? and permission_status=0 ) and membership_code in ( ? , ? )
2025-10-19 11:44:34,947 DEBUG (BaseJdbcLogger.java:135)- ==> Parameters: 1943230203698479104(String), 1943230203698479104(String), 1945410884406898688(String), 0(String), 1944321029459939328(String), 1943230204135182336(String)
2025-10-19 11:44:34,948 DEBUG (BaseJdbcLogger.java:135)- <==      Total: 0
2025-10-19 11:44:34,949 INFO (KnowledgeElementServiceImpl.java:462)- 没有权限，查询继承下来的文档
2025-10-19 11:44:34,991 DEBUG (BaseJdbcLogger.java:135)- ==>  Preparing: SELECT count(0) FROM saas_knowledge_element WHERE (tenant_id = ? AND container_id = ? AND parent_code = ? AND (process_status <> ? OR (process_status = ? AND creator = ?)) AND permission_status = ?)
2025-10-19 11:44:34,992 DEBUG (BaseJdbcLogger.java:135)- ==> Parameters: 1943230203698479104(String), 1945410884406898688(String), 0(String), -1(Integer), -1(Integer), 1943230204135182336(String), 1(Integer)
2025-10-19 11:44:34,993 DEBUG (BaseJdbcLogger.java:135)- <==      Total: 1
2025-10-19 11:44:34,995 DEBUG (BaseJdbcLogger.java:135)- ==>  Preparing: SELECT id,creator,create_time,modifier,modifier_time,sort,tenant_id,container_id,category,code,parent_code,ele_name,ele_suffix,ele_url,ele_preview_url,ele_size,ele_token_size,ele_md5,never_expire,enable,start_time,end_time,process_status,error_message,process_count,page_count,year,topic,chunk_count,config,read_count,collect_count,followers,likes_count,hot_number,permission_status FROM saas_knowledge_element WHERE (tenant_id = ? AND container_id = ? AND parent_code = ? AND (process_status <> ? OR (process_status = ? AND creator = ?)) AND permission_status = ?) ORDER BY sort ASC LIMIT ?
2025-10-19 11:44:34,995 DEBUG (BaseJdbcLogger.java:135)- ==> Parameters: 1943230203698479104(String), 1945410884406898688(String), 0(String), -1(Integer), -1(Integer), 1943230204135182336(String), 1(Integer), 999999(Integer)
2025-10-19 11:44:34,997 DEBUG (BaseJdbcLogger.java:135)- <==      Total: 6
2025-10-19 11:44:35,003 DEBUG (BaseJdbcLogger.java:135)- ==>  Preparing: SELECT code,login_username,real_name,nick_name FROM saas_sys_user WHERE (code IN (?,?))
2025-10-19 11:44:35,003 DEBUG (BaseJdbcLogger.java:135)- ==> Parameters: 4(String), 1943230204135182336(String)
2025-10-19 11:44:35,005 DEBUG (BaseJdbcLogger.java:135)- <==      Total: 1
2025-10-19 11:45:00,572 INFO (PlatformAuthServiceImpl.java:66)- PlatformAuthServiceImpl.check,uri:/kl/api/saas/element/list
2025-10-19 11:45:00,574 INFO (KnowledgeElementController.java:176)- 分页查询知识库元素,API:/kl/api/saas/element/list,page:1,size:999999
2025-10-19 11:45:00,574 INFO (KnowledgeElementController.java:177)- 查询条件Vo:KnowledgeElementQueryReq(containerId=1945410884406898688, category=null, parentCode=0, eleName=null, processStatus=null, sortRule=0, sortType=1, pageCode=null)
2025-10-19 11:45:00,574 INFO (KnowledgeElementServiceImpl.java:426)- 分页查询知识库元素列表,pageNo:1,pageSize:999999
2025-10-19 11:45:00,574 INFO (KnowledgeElementServiceImpl.java:427)- 分页QueryReq:KnowledgeElementQueryReq(containerId=1945410884406898688, category=null, parentCode=0, eleName=null, processStatus=null, sortRule=0, sortType=1, pageCode=null)
2025-10-19 11:45:00,579 DEBUG (BaseJdbcLogger.java:135)- ==>  Preparing: select ku.user_code,ku.department_code,kd.name,kd.full_path,kd.type from kb_department_user ku left join kb_department kd on ku.department_code=kd.`code` where ku.tenant_id=? and ku.user_code=?
2025-10-19 11:45:00,579 DEBUG (BaseJdbcLogger.java:135)- ==> Parameters: 1943230203698479104(String), 1943230204135182336(String)
2025-10-19 11:45:00,581 DEBUG (BaseJdbcLogger.java:135)- <==      Total: 1
2025-10-19 11:45:00,581 DEBUG (BaseJdbcLogger.java:135)- ==>  Preparing: select element_code from saas_knowledge_element_permission where tenant_id=? and element_code in ( SELECT code from saas_knowledge_element where tenant_id=? and container_id=? and parent_code=? and permission_status=0 ) and membership_code in ( ? , ? )
2025-10-19 11:45:00,581 DEBUG (BaseJdbcLogger.java:135)- ==> Parameters: 1943230203698479104(String), 1943230203698479104(String), 1945410884406898688(String), 0(String), 1944321029459939328(String), 1943230204135182336(String)
2025-10-19 11:45:00,582 DEBUG (BaseJdbcLogger.java:135)- <==      Total: 0
2025-10-19 11:45:00,583 INFO (KnowledgeElementServiceImpl.java:462)- 没有权限，查询继承下来的文档
2025-10-19 11:45:00,586 DEBUG (BaseJdbcLogger.java:135)- ==>  Preparing: SELECT count(0) FROM saas_knowledge_element WHERE (tenant_id = ? AND container_id = ? AND parent_code = ? AND (process_status <> ? OR (process_status = ? AND creator = ?)) AND permission_status = ?)
2025-10-19 11:45:00,586 DEBUG (BaseJdbcLogger.java:135)- ==> Parameters: 1943230203698479104(String), 1945410884406898688(String), 0(String), -1(Integer), -1(Integer), 1943230204135182336(String), 1(Integer)
2025-10-19 11:45:00,587 DEBUG (BaseJdbcLogger.java:135)- <==      Total: 1
2025-10-19 11:45:00,587 DEBUG (BaseJdbcLogger.java:135)- ==>  Preparing: SELECT id,creator,create_time,modifier,modifier_time,sort,tenant_id,container_id,category,code,parent_code,ele_name,ele_suffix,ele_url,ele_preview_url,ele_size,ele_token_size,ele_md5,never_expire,enable,start_time,end_time,process_status,error_message,process_count,page_count,year,topic,chunk_count,config,read_count,collect_count,followers,likes_count,hot_number,permission_status FROM saas_knowledge_element WHERE (tenant_id = ? AND container_id = ? AND parent_code = ? AND (process_status <> ? OR (process_status = ? AND creator = ?)) AND permission_status = ?) ORDER BY sort ASC LIMIT ?
2025-10-19 11:45:00,587 DEBUG (BaseJdbcLogger.java:135)- ==> Parameters: 1943230203698479104(String), 1945410884406898688(String), 0(String), -1(Integer), -1(Integer), 1943230204135182336(String), 1(Integer), 999999(Integer)
2025-10-19 11:45:00,590 DEBUG (BaseJdbcLogger.java:135)- <==      Total: 6
2025-10-19 11:45:00,591 DEBUG (BaseJdbcLogger.java:135)- ==>  Preparing: SELECT code,login_username,real_name,nick_name FROM saas_sys_user WHERE (code IN (?,?))
2025-10-19 11:45:00,592 DEBUG (BaseJdbcLogger.java:135)- ==> Parameters: 4(String), 1943230204135182336(String)
2025-10-19 11:45:00,592 DEBUG (BaseJdbcLogger.java:135)- <==      Total: 1
2025-10-19 11:45:51,290 INFO (PlatformAuthServiceImpl.java:66)- PlatformAuthServiceImpl.check,uri:/user/api/auth/userInfo
2025-10-19 11:45:51,301 DEBUG (BaseJdbcLogger.java:135)- ==>  Preparing: SELECT code,email,job_no,nick_name,unique_name FROM saas_sys_user WHERE (code = ? AND tenant_id = ?)
2025-10-19 11:45:51,301 DEBUG (BaseJdbcLogger.java:135)- ==> Parameters: 1943230204135182336(String), 1943230203698479104(String)
2025-10-19 11:45:51,302 DEBUG (BaseJdbcLogger.java:135)- <==      Total: 1
2025-10-19 11:45:51,309 DEBUG (BaseJdbcLogger.java:135)- ==>  Preparing: SELECT distinct t1.* FROM saas_sys_perm t1, saas_sys_role_perm_rela t2, saas_sys_user_role_rela t3 where t1.permission_id=t2.perm_id and t2.role_id=t3.role_id and t1.state=1 and t1.lang=? and t3.user_code=? and t1.sys_type=? order by t1.sort
2025-10-19 11:45:51,309 DEBUG (BaseJdbcLogger.java:135)- ==> Parameters: zh_CN(String), 1943230204135182336(String), cli(String)
2025-10-19 11:45:51,319 DEBUG (BaseJdbcLogger.java:135)- <==      Total: 55
2025-10-19 11:45:51,325 DEBUG (BaseJdbcLogger.java:135)- ==>  Preparing: SELECT id,creator,create_time,modifier,modifier_time,sort,category,scope,code,value,tenant_id FROM kb_directory WHERE (category = ? AND scope = ? AND tenant_id = ?)
2025-10-19 11:45:51,325 DEBUG (BaseJdbcLogger.java:135)- ==> Parameters: SERVICE(String), KB_SYSTEM_INFO(String), 1943230203698479104(String)
2025-10-19 11:45:51,327 DEBUG (BaseJdbcLogger.java:135)- <==      Total: 0
2025-10-19 11:45:51,888 INFO (AppInfoController.java:140)- 分页查询应用信息,API:/store/api/saas/app/list,page:1,size:30
2025-10-19 11:45:51,889 INFO (AppInfoController.java:141)- 查询条件Vo:AppInfoQueryReq(category=null, name=null, searchType=ALL)
2025-10-19 11:45:51,889 INFO (AppInfoServiceImpl.java:317)- 分页查询应用信息列表V2,pageNo:1,pageSize:30
2025-10-19 11:45:51,902 DEBUG (BaseJdbcLogger.java:135)- ==>  Preparing: SELECT count(0) FROM app_info WHERE (tenant_id = ? AND platform = ? AND status = ?)
2025-10-19 11:45:51,903 DEBUG (BaseJdbcLogger.java:135)- ==> Parameters: 1943230203698479104(String), AIS(String), PUBLISHED(String)
2025-10-19 11:45:51,904 DEBUG (BaseJdbcLogger.java:135)- <==      Total: 1
2025-10-19 11:45:51,904 DEBUG (BaseJdbcLogger.java:135)- ==>  Preparing: SELECT id,creator,create_time,modifier,modifier_time,sort,tenant_id,category,icon,name,description,appid,secret,access_token,code,visibility_range,status,platform,cover_url,copy_to_app,use_count FROM app_info WHERE (tenant_id = ? AND platform = ? AND status = ?) ORDER BY create_time DESC LIMIT ?
2025-10-19 11:45:51,904 DEBUG (BaseJdbcLogger.java:135)- ==> Parameters: 1943230203698479104(String), AIS(String), PUBLISHED(String), 30(Integer)
2025-10-19 11:45:51,906 DEBUG (BaseJdbcLogger.java:135)- <==      Total: 2
2025-10-19 11:45:51,907 DEBUG (BaseJdbcLogger.java:135)- ==>  Preparing: SELECT id,creator,create_time,modifier,modifier_time,sort,tenant_id,name,simple_name,app_id FROM app_tag WHERE (tenant_id = ? AND app_id IN (?,?))
2025-10-19 11:45:51,907 DEBUG (BaseJdbcLogger.java:135)- ==> Parameters: 1943230203698479104(String), tv_64da080bd96b4726ab6f4db1a595c522(String), tv_70ec12cb1ca041b8af3a8391f3de8602(String)
2025-10-19 11:45:51,908 DEBUG (BaseJdbcLogger.java:135)- <==      Total: 0
2025-10-19 11:45:51,908 DEBUG (BaseJdbcLogger.java:135)- ==>  Preparing: SELECT code,login_username,real_name,nick_name FROM saas_sys_user WHERE (tenant_id = ? AND code IN (?))
2025-10-19 11:45:51,909 DEBUG (BaseJdbcLogger.java:135)- ==> Parameters: 1943230203698479104(String), 1943230204135182336(String)
2025-10-19 11:45:51,909 DEBUG (BaseJdbcLogger.java:135)- <==      Total: 1
