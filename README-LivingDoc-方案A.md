# 活文档功能 - 方案 A（已实现）

## 🎉 实现完成

**方案 A：基础文档生成 + 搜索** 已全部实现！

---

## 🚀 快速开始

### 1. 索引项目

在 IntelliJ IDEA 中打开您的 Spring Boot 项目，然后：

```
Tools -> 活文档 -> 索引项目文档
```

或按快捷键 `Ctrl+Alt+Shift+I`

等待分析完成，文档将自动保存到项目根目录的 `.livingdoc/` 文件夹。

### 2. 搜索接口

```
Tools -> 活文档 -> 搜索文档
```

或按快捷键 `Ctrl+Alt+Shift+S`

输入关键词，例如：
- `user` - 搜索包含 "user" 的接口
- `/api/` - 搜索特定路径
- `POST` - 搜索特定 HTTP 方法
- `登录` - 搜索中文描述

### 3. 查看结果

搜索结果会在工具窗口中显示，包括：
- HTTP 方法（彩色标签）
- API 路径
- 接口描述
- 相关度分数
- 匹配字段

**点击"跳转到源代码"可直接查看实现！**

### 4. 导出文档

```
Tools -> 活文档 -> 导出文档
```

选择导出目录，生成 Markdown 格式的 API 文档。

---

## ✨ 主要功能

### ✅ 代码分析

自动识别 Spring Boot 项目中的所有 API 接口：

- `@RestController` / `@Controller`
- `@RequestMapping` / `@GetMapping` / `@PostMapping` 等
- `@RequestParam` / `@PathVariable` / `@RequestBody`
- JavaDoc 注释

### ✅ 文档生成

生成美观的 Markdown 格式文档，包含：

- 接口统计信息
- 完整的目录
- 每个接口的详细信息：
  - HTTP 方法和 URL
  - 描述
  - 参数表格
  - 返回值类型
  - 源代码位置

### ✅ 智能搜索

多维度搜索，支持匹配：

- URL 路径
- 方法名
- 接口描述
- HTTP 方法
- 类名
- 参数名

按相关度排序，自动高亮匹配字段。

### ✅ 源码跳转

点击搜索结果中的链接，直接跳转到对应的源代码位置。

---

## 📁 文件结构

项目索引后，会在根目录生成 `.livingdoc/` 文件夹：

```
项目根目录/
└── .livingdoc/
    ├── api-documentation.json  （JSON 格式，用于搜索）
    └── API文档.md               （Markdown 格式，可直接阅读）
```

---

## 🎨 截图预览

### 搜索结果界面

```
搜索结果: "用户"
找到 5 个匹配的接口

┌────────────────────────────────────────┐
│ 分数: 5.5                               │
│ POST /api/user/login                   │
│ 📝 用户登录接口                        │
│ 📦 UserController.login()              │
│ 匹配字段: URL | [跳转到源代码]        │
└────────────────────────────────────────┘

┌────────────────────────────────────────┐
│ 分数: 3.0                               │
│ GET /api/user/{id}                     │
│ 📝 获取用户详情                        │
│ 📦 UserController.getUserById()        │
│ 匹配字段: 描述 | [跳转到源代码]       │
└────────────────────────────────────────┘
```

### 生成的 Markdown 文档

```markdown
# 项目名 - API 文档

> 📅 生成时间: 2025-10-24 10:30:00

## 📊 统计信息
- **总接口数**: 25
- **GET**: 12
- **POST**: 8
- **PUT**: 3
- **DELETE**: 2

## 📝 接口详情

### POST /api/user/login

**描述**: 用户登录接口

**请求参数**:
| 参数名 | 类型 | 位置 | 必填 | 说明 |
|--------|------|------|------|------|
| `username` | String | body | ✅ | 用户名 |
| `password` | String | body | ✅ | 密码 |

**响应类型**: `LoginResponse`
```

---

## 🔧 配置说明

### 工具窗口

打开方式：`View -> Tool Windows -> 活文档`

### 快捷键

| 操作 | 快捷键 |
|------|--------|
| 索引项目 | `Ctrl+Alt+Shift+I` |
| 搜索文档 | `Ctrl+Alt+Shift+S` |

### 菜单位置

```
Tools
└── 活文档
    ├── 索引项目文档
    ├── 搜索文档
    └── 导出文档
```

---

## 💡 使用技巧

### 1. 搜索技巧

**精确搜索**:
- 搜索完整 URL: `/api/user/login`
- 搜索 HTTP 方法: `POST`

**模糊搜索**:
- 搜索关键词: `用户`、`登录`
- 搜索类名: `UserController`

**组合搜索**:
- 搜索 "POST 用户" 可以找到所有用户相关的 POST 接口

### 2. 定期更新

代码修改后，记得重新索引：

```
Tools -> 活文档 -> 索引项目文档
```

### 3. 团队协作

将 `.livingdoc/API文档.md` 添加到 Git：

```bash
git add .livingdoc/API文档.md
git commit -m "docs: 更新 API 文档"
```

团队成员 pull 后即可查看最新文档。

---

## 🎯 适用场景

### ✅ 适合

- Spring Boot 项目
- RESTful API 开发
- 团队协作项目
- 快速原型项目
- 需要文档的项目

### ⚠️ 不适合

- 非 Spring Boot 项目（JAX-RS、Play Framework 等）
- 不需要文档的项目
- 纯前端项目

---

## 🔄 与其他方案对比

| 特性 | 方案 A（当前）| 方案 B（AI+RAG）|
|------|---------------|-----------------|
| 实现难度 | ⭐⭐ 简单 | ⭐⭐⭐⭐⭐ 复杂 |
| 外部依赖 | ❌ 无 | ✅ AI + ES |
| 搜索方式 | 文本匹配 | 向量搜索 |
| AI 问答 | ❌ | ✅ |
| 稳定性 | ⭐⭐⭐⭐⭐ | ⭐⭐⭐ |
| 速度 | ⚡ 极快 | 🐢 较慢 |
| 成本 | 免费 | 需要 AI API |

---

## 📚 相关文档

- [实现完成报告](docs/活文档功能-方案A实现完成报告.md) - 详细的技术实现
- [问题解决报告](docs/活文档功能-问题解决报告.md) - 问题排查记录

---

## ❓ 常见问题

### Q1: 索引后找不到接口？

**A**: 确保项目是 Spring Boot 项目，并使用了标准的 Spring MVC 注解（`@RestController`、`@RequestMapping` 等）。

### Q2: 搜索结果为空？

**A**: 
1. 确认已经索引项目
2. 尝试使用更宽泛的关键词
3. 检查 `.livingdoc/api-documentation.json` 文件是否存在

### Q3: 跳转到源代码失败？

**A**: 确认源代码文件路径没有变化。如果移动了文件，需要重新索引。

### Q4: 如何更新文档？

**A**: 代码修改后，重新运行"索引项目文档"即可。

---

## 🎊 总结

方案 A 提供了：

✅ **零配置** - 开箱即用  
✅ **零依赖** - 无需外部服务  
✅ **高性能** - 本地运行，极快响应  
✅ **易维护** - 代码简洁，稳定可靠  

非常适合作为项目的基础文档工具！

---

**立即开始使用吧！** 🚀

如有问题或建议，请提 Issue。

