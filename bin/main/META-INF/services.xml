<idea-plugin>
    <!-- 原有plugin.xml内容保持不变 -->
    
    <!-- 添加增强版Bug记录器的相关组件 -->
    <extensions defaultExtensionNs="com.intellij">
        <!-- 项目级服务 -->
        <projectService serviceImplementation="com.shuyixiao.bugrecorder.enhanced.EnhancedConsoleMonitoringService"/>
        <projectService serviceImplementation="com.shuyixiao.bugrecorder.enhanced.EnhancedExecutionListener"/>
        <projectService serviceImplementation="com.shuyixiao.bugrecorder.enhanced.EnhancedBugRecordManager"/>
        <projectService serviceImplementation="com.shuyixiao.bugrecorder.enhanced.EnhancedBugAnalysisService"/>
        <projectService serviceImplementation="com.shuyixiao.bugrecorder.enhanced.BugAggregationService"/>
        <projectService serviceImplementation="com.shuyixiao.bugrecorder.enhanced.ErrorPatternLearningService"/>
    </extensions>

    <!-- 启动活动 -->
    <applicationListeners>
        <listener class="com.shuyixiao.bugrecorder.enhanced.EnhancedBugRecorderStartupActivity" 
                  topic="com.intellij.openapi.project.ProjectManagerListener"/>
    </applicationListeners>
</idea-plugin>