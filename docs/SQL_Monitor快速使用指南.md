# SQL Monitor å¿«é€Ÿä½¿ç”¨æŒ‡å—

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1ï¸âƒ£ æ‰“å¼€SQL Monitorå·¥å…·çª—å£

åœ¨IntelliJ IDEAåº•éƒ¨å·¥å…·æ ï¼Œæ‰¾åˆ°å¹¶ç‚¹å‡» **"SQL Monitor"** æ ‡ç­¾é¡µã€‚

![MySQLå›¾æ ‡](../src/main/resources/icons/mysql.svg)

### 2ï¸âƒ£ å¯ç”¨SQLç›‘å¬

ç¡®ä¿å·¥å…·æ ä¸Šçš„ **"å¯ç”¨SQLç›‘å¬"** å¤é€‰æ¡†æ˜¯**é€‰ä¸­çŠ¶æ€**ã€‚

### 3ï¸âƒ£ è¿è¡Œä½ çš„é¡¹ç›®

å¯åŠ¨ä½ çš„Spring Booté¡¹ç›®æˆ–ä»»ä½•ä½¿ç”¨MyBatisçš„Javaé¡¹ç›®ã€‚

### 4ï¸âƒ£ æŸ¥çœ‹SQLè®°å½•

SQL Monitorä¼šè‡ªåŠ¨æ•è·æ‰€æœ‰SQLæŸ¥è¯¢å¹¶å®æ—¶æ˜¾ç¤ºåœ¨è¡¨æ ¼ä¸­ï¼

## ğŸ“Š ç•Œé¢åŠŸèƒ½è¯´æ˜

### å·¥å…·æ åŒºåŸŸ

```
[âœ“ å¯ç”¨SQLç›‘å¬] | [æœç´¢: _____] [æ“ä½œ: å…¨éƒ¨æ“ä½œâ–¼] [æ—¶é—´: æœ€è¿‘1å°æ—¶â–¼] [åˆ·æ–°] [æ¸…ç©ºæ‰€æœ‰] [å¯¼å‡ºé€‰ä¸­]
```

#### åŠŸèƒ½è¯´æ˜ï¼š
- **å¯ç”¨SQLç›‘å¬**: å¼€å…³SQLç›‘å¬åŠŸèƒ½
- **æœç´¢æ¡†**: æœç´¢SQLå…³é”®è¯ã€è¡¨åã€APIè·¯å¾„
- **æ“ä½œè¿‡æ»¤**: ç­›é€‰ç‰¹å®šæ“ä½œç±»å‹ï¼ˆSELECT/INSERT/UPDATE/DELETEï¼‰
- **æ—¶é—´è¿‡æ»¤**: ç­›é€‰ç‰¹å®šæ—¶é—´èŒƒå›´çš„SQL
- **åˆ·æ–°æŒ‰é’®**: æ‰‹åŠ¨åˆ·æ–°æ•°æ®ï¼ˆå®é™…ä¸Šä¼šè‡ªåŠ¨åˆ·æ–°ï¼‰
- **æ¸…ç©ºæ‰€æœ‰**: æ¸…ç©ºæ‰€æœ‰å†å²è®°å½•
- **å¯¼å‡ºé€‰ä¸­**: å¯¼å‡ºé€‰ä¸­çš„SQLè®°å½•

### è¡¨æ ¼åŒºåŸŸ

| æ“ä½œ | è¡¨å | APIè·¯å¾„ | SQLæ‘˜è¦ | ç»“æœæ•° | æ—¶é—´æˆ³ |
|-----|------|---------|---------|--------|--------|
| SELECT | user | /api/user/list | SELECT id,name FROM user... | 10 | 2025-10-18 22:21:30 |

#### åˆ—è¯´æ˜ï¼š
- **æ“ä½œ**: SQLæ“ä½œç±»å‹ï¼Œå¸¦é¢œè‰²æ ‡è¯†
  - ğŸ”µ SELECT (è“è‰²)
  - ğŸŸ¢ INSERT (ç»¿è‰²)
  - ğŸŸ  UPDATE (æ©™è‰²)
  - ğŸ”´ DELETE (çº¢è‰²)
- **è¡¨å**: æ“ä½œçš„æ•°æ®åº“è¡¨
- **APIè·¯å¾„**: è§¦å‘SQLçš„APIæ¥å£
- **SQLæ‘˜è¦**: SQLè¯­å¥å‰100ä¸ªå­—ç¬¦
- **ç»“æœæ•°**: æŸ¥è¯¢è¿”å›çš„è®°å½•æ•°
- **æ—¶é—´æˆ³**: SQLæ‰§è¡Œæ—¶é—´

### è¯¦æƒ…é¢æ¿

ç‚¹å‡»è¡¨æ ¼ä¸­çš„ä»»æ„è®°å½•ï¼Œä¸‹æ–¹ä¼šæ˜¾ç¤ºå®Œæ•´çš„SQLè¯¦æƒ…ï¼š

```
=== SQL æŸ¥è¯¢è¯¦æƒ… ===

æ—¶é—´: 2025-10-18 22:21:30
é¡¹ç›®: MyProject
æ“ä½œ: SELECT
è¡¨å: user
æ¥æº: MyBatis
ç»“æœæ•°: 10
APIè·¯å¾„: /api/user/list
è°ƒç”¨ç±»: UserController.java:45

=== SQL è¯­å¥ ===
SELECT id, name, email, created_at
FROM user
WHERE status = ?
  AND created_at > ?
ORDER BY id DESC
LIMIT ?

=== å‚æ•° ===
1(Integer), 2025-01-01 00:00:00(Timestamp), 10(Integer)
```

### çŠ¶æ€æ 

```
ç›‘å¬çŠ¶æ€: å¯ç”¨ | æ´»åŠ¨ç›‘å¬å™¨: 1 | æ€»æŸ¥è¯¢: 51 | SELECT: 48 | INSERT: 2 | UPDATE: 1 | DELETE: 0 | è¡¨æ•°: 8
```

å®æ—¶æ˜¾ç¤ºï¼š
- ç›‘å¬çŠ¶æ€
- æ´»åŠ¨ç›‘å¬å™¨æ•°é‡
- å„ç±»SQLç»Ÿè®¡
- æ¶‰åŠçš„è¡¨æ•°é‡

## ğŸ¯ å¸¸è§ä½¿ç”¨åœºæ™¯

### åœºæ™¯1: æŸ¥æ‰¾æ…¢æŸ¥è¯¢

1. è¿è¡Œé¡¹ç›®æ‰§è¡Œä¸€äº›æ“ä½œ
2. åœ¨SQL Monitorä¸­æŸ¥çœ‹æ‰€æœ‰SQL
3. å…³æ³¨SQLè¯­å¥çš„å¤æ‚åº¦å’Œè¡¨å
4. æ‰¾å‡ºå¯èƒ½çš„æ…¢æŸ¥è¯¢å¹¶ä¼˜åŒ–

### åœºæ™¯2: è¿½è¸ªAPIçš„SQLè°ƒç”¨

1. è°ƒç”¨æŸä¸ªAPIæ¥å£ï¼ˆå¦‚ `/api/user/list`ï¼‰
2. åœ¨æœç´¢æ¡†è¾“å…¥ `/api/user/list`
3. æŸ¥çœ‹è¯¥APIæ‰§è¡Œäº†å“ªäº›SQL
4. åˆ†æSQLçš„åˆç†æ€§

### åœºæ™¯3: ç›‘æ§ç‰¹å®šè¡¨çš„è®¿é—®

1. åœ¨æœç´¢æ¡†è¾“å…¥è¡¨åï¼ˆå¦‚ `user`ï¼‰
2. æŸ¥çœ‹è¯¥è¡¨çš„æ‰€æœ‰è®¿é—®è®°å½•
3. åˆ†æè®¿é—®é¢‘ç‡å’Œæ“ä½œç±»å‹

### åœºæ™¯4: æŒ‰æ“ä½œç±»å‹ç­›é€‰

1. åœ¨"æ“ä½œ"ä¸‹æ‹‰æ¡†é€‰æ‹© `UPDATE`
2. æŸ¥çœ‹æ‰€æœ‰æ›´æ–°æ“ä½œ
3. æ£€æŸ¥æ›´æ–°æ“ä½œçš„åˆç†æ€§

### åœºæ™¯5: å¯¼å‡ºSQLç”¨äºåˆ†æ

1. åœ¨è¡¨æ ¼ä¸­é€‰æ‹©ä¸€æ¡è®°å½•
2. ç‚¹å‡»"å¯¼å‡ºé€‰ä¸­"æŒ‰é’®
3. SQLè¯¦æƒ…å·²å¤åˆ¶åˆ°å‰ªè´´æ¿
4. ç²˜è´´åˆ°SQLå·¥å…·ä¸­è¿›è¡Œåˆ†æ

## ğŸ” é«˜çº§æŠ€å·§

### æŠ€å·§1: ç»„åˆç­›é€‰

```
1. æœç´¢æ¡†è¾“å…¥: "user"
2. æ“ä½œé€‰æ‹©: "SELECT"
3. æ—¶é—´é€‰æ‹©: "æœ€è¿‘1å°æ—¶"
â†’ ç»“æœ: æœ€è¿‘1å°æ—¶å†…ï¼Œuserè¡¨çš„æ‰€æœ‰SELECTæŸ¥è¯¢
```

### æŠ€å·§2: å¿«é€Ÿå¤åˆ¶SQL

```
1. åŒå‡»è¡¨æ ¼ä¸­çš„è®°å½•
2. åœ¨å¼¹å‡ºçš„è¯¦æƒ…å¯¹è¯æ¡†ä¸­æŸ¥çœ‹å®Œæ•´SQL
3. ç‚¹å‡»"å…³é—­"è¿”å›
```

### æŠ€å·§3: æ‰¹é‡æ¸…ç†

```
1. ç‚¹å‡»"æ¸…ç©ºæ‰€æœ‰"æŒ‰é’®
2. ç¡®è®¤å¯¹è¯æ¡†ç‚¹å‡»"æ˜¯"
3. æ‰€æœ‰å†å²è®°å½•è¢«æ¸…ç©º
```

## âš™ï¸ é…ç½®è¯´æ˜

### è‡ªåŠ¨ä¿å­˜

SQL Monitorä¼šè‡ªåŠ¨å°†è®°å½•ä¿å­˜åˆ°é¡¹ç›®çš„ `.idea/sql-records.json` æ–‡ä»¶ä¸­ã€‚

### æœ€å¤§è®°å½•æ•°

é»˜è®¤ä¿å­˜æœ€è¿‘1000æ¡SQLè®°å½•ï¼Œè¶…è¿‡åè‡ªåŠ¨åˆ é™¤æœ€æ—§çš„è®°å½•ã€‚

### å®æ—¶æ›´æ–°

- æ–°SQLè‡ªåŠ¨æ˜¾ç¤ºï¼Œæ— éœ€æ‰‹åŠ¨åˆ·æ–°
- æ¯10ç§’è‡ªåŠ¨åˆ·æ–°ä¸€æ¬¡ï¼ˆå¤‡ç”¨æœºåˆ¶ï¼‰

## ğŸ› å¸¸è§é—®é¢˜

### Q1: ä¸ºä»€ä¹ˆæ²¡æœ‰æ•è·åˆ°SQLï¼Ÿ

**A**: æ£€æŸ¥ä»¥ä¸‹å‡ ç‚¹ï¼š
1. "å¯ç”¨SQLç›‘å¬"å¼€å…³æ˜¯å¦æ‰“å¼€
2. é¡¹ç›®æ˜¯å¦æ­£åœ¨è¿è¡Œ
3. é¡¹ç›®æ˜¯å¦ä½¿ç”¨MyBatisæˆ–ç±»ä¼¼æ¡†æ¶
4. æ—¥å¿—çº§åˆ«æ˜¯å¦è®¾ç½®ä¸ºDEBUG

**é…ç½®ç¤ºä¾‹**ï¼ˆapplication.ymlï¼‰ï¼š
```yaml
logging:
  level:
    com.yourpackage.mapper: DEBUG
```

### Q2: SQLè®°å½•å¤ªå¤šæ€ä¹ˆåŠï¼Ÿ

**A**: ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•ï¼š
1. ä½¿ç”¨æ—¶é—´è¿‡æ»¤å™¨åªçœ‹æœ€è¿‘çš„è®°å½•
2. ä½¿ç”¨æœç´¢æ¡†ç²¾ç¡®æŸ¥æ‰¾
3. ç‚¹å‡»"æ¸…ç©ºæ‰€æœ‰"æ¸…ç†å†å²è®°å½•

### Q3: å¦‚ä½•åªçœ‹ç‰¹å®šè¡¨çš„SQLï¼Ÿ

**A**: åœ¨æœç´¢æ¡†ä¸­è¾“å…¥è¡¨åï¼Œä¾‹å¦‚ `user`ã€‚

### Q4: APIè·¯å¾„æ˜¾ç¤ºN/Aï¼Ÿ

**A**: å¯èƒ½çš„åŸå› ï¼š
1. æ—¥å¿—ä¸­æ²¡æœ‰è®°å½•APIè·¯å¾„ä¿¡æ¯
2. APIæ—¥å¿—åœ¨SQLæ—¥å¿—ä¹‹å‰å¤ªä¹…ï¼Œè¶…å‡ºäº†ç¼“å†²åŒº

**å»ºè®®**ï¼šç¡®ä¿Controllerå±‚æœ‰æ—¥å¿—è¾“å‡ºï¼Œä¾‹å¦‚ï¼š
```java
log.info("API:/api/user/list");
```

### Q5: å¦‚ä½•ä¿®æ”¹æ—¥å¿—çº§åˆ«ï¼Ÿ

**A**: åœ¨ `application.yml` æˆ– `application.properties` ä¸­é…ç½®ï¼š

**YAMLæ ¼å¼**ï¼š
```yaml
logging:
  level:
    root: INFO
    com.yourpackage.mapper: DEBUG  # MyBatis Mapper
```

**Propertiesæ ¼å¼**ï¼š
```properties
logging.level.root=INFO
logging.level.com.yourpackage.mapper=DEBUG
```

## ğŸ“š æ”¯æŒçš„æ—¥å¿—æ ¼å¼

### MyBatisæ ‡å‡†æ ¼å¼

```
==>  Preparing: SELECT * FROM user WHERE id = ?
==> Parameters: 123(String)
<==      Total: 1
```

### JdbcLoggeræ ¼å¼

```
DEBUG (BaseJdbcLogger.java:135)- ==>  Preparing: SELECT ...
DEBUG (BaseJdbcLogger.java:135)- ==> Parameters: ...
DEBUG (BaseJdbcLogger.java:135)- <==      Total: ...
```

## ğŸ¨ é¢œè‰²è¯´æ˜

SQL Monitorä½¿ç”¨ä¸åŒé¢œè‰²æ ‡è¯†SQLæ“ä½œç±»å‹ï¼š

| æ“ä½œç±»å‹ | é¢œè‰² | å«ä¹‰ |
|---------|------|------|
| SELECT | ğŸ”µ è“è‰² | æŸ¥è¯¢æ“ä½œï¼Œä¸ä¿®æ”¹æ•°æ® |
| INSERT | ğŸŸ¢ ç»¿è‰² | æ’å…¥æ“ä½œï¼Œæ–°å¢æ•°æ® |
| UPDATE | ğŸŸ  æ©™è‰² | æ›´æ–°æ“ä½œï¼Œä¿®æ”¹æ•°æ® |
| DELETE | ğŸ”´ çº¢è‰² | åˆ é™¤æ“ä½œï¼Œåˆ é™¤æ•°æ® |

## ğŸ’¡ æœ€ä½³å®è·µ

### 1. å¼€å‘è°ƒè¯•

åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œå§‹ç»ˆå¼€å¯SQL Monitorï¼š
- å®æ—¶äº†è§£æ¯ä¸ªæ“ä½œè§¦å‘äº†å“ªäº›SQL
- åŠæ—¶å‘ç°N+1æŸ¥è¯¢é—®é¢˜
- ä¼˜åŒ–SQLæ€§èƒ½

### 2. æ€§èƒ½ä¼˜åŒ–

ä½¿ç”¨SQL Monitorè¿›è¡Œæ€§èƒ½ä¼˜åŒ–ï¼š
- æ‰¾å‡ºé¢‘ç¹æ‰§è¡Œçš„SQL
- è¯†åˆ«å¤æ‚çš„JOINæŸ¥è¯¢
- å‘ç°ç¼ºå°‘ç´¢å¼•çš„è¡¨

### 3. é—®é¢˜æ’æŸ¥

ä½¿ç”¨SQL Monitoræ’æŸ¥é—®é¢˜ï¼š
- è¿½è¸ªç‰¹å®šAPIçš„SQLè°ƒç”¨é“¾
- æ£€æŸ¥å‚æ•°ç»‘å®šæ˜¯å¦æ­£ç¡®
- éªŒè¯SQLæ‰§è¡Œç»“æœ

### 4. ä»£ç å®¡æŸ¥

åœ¨ä»£ç å®¡æŸ¥æ—¶ä½¿ç”¨SQL Monitorï¼š
- éªŒè¯æ–°åŠŸèƒ½çš„SQLåˆç†æ€§
- æ£€æŸ¥æ˜¯å¦æœ‰å†—ä½™çš„SQLæŸ¥è¯¢
- ç¡®ä¿äº‹åŠ¡è¾¹ç•Œæ­£ç¡®

## ğŸ”— ç›¸å…³åŠŸèƒ½

SQL Monitorä¸å…¶ä»–PandaCoderåŠŸèƒ½é…åˆä½¿ç”¨ï¼š

- **ES DSL Monitor**: ç›‘æ§ElasticsearchæŸ¥è¯¢
- **Bug Recorder**: è®°å½•è¿è¡Œæ—¶å¼‚å¸¸
- **SpringBooté…ç½®æ–‡ä»¶å›¾æ ‡**: è¯†åˆ«æŠ€æœ¯æ ˆ

## ğŸ“ è·å–å¸®åŠ©

å¦‚æœé‡åˆ°é—®é¢˜ï¼Œå¯ä»¥ï¼š

1. æŸ¥çœ‹æ’ä»¶è®¾ç½®ï¼š`Settings > Tools > PandaCoder`
2. æŸ¥çœ‹æ—¥å¿—ï¼š`Help > Show Log in Explorer`
3. è”ç³»ä½œè€…ï¼šyixiaoshu88@163.com
4. è®¿é—®é¡¹ç›®ä¸»é¡µï¼šhttps://www.shuyixiao.top

---

**ç‰ˆæœ¬**: 1.0.0  
**æ›´æ–°æ—¶é—´**: 2025-10-18  
**ä½œè€…**: PandaCoder Team

