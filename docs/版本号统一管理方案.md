# PandaCoder ç‰ˆæœ¬å·ç»Ÿä¸€ç®¡ç†æ–¹æ¡ˆ

## ğŸ“‹ æ¦‚è¿°

æœ¬æ–‡æ¡£è¯´æ˜ PandaCoder é¡¹ç›®çš„ç‰ˆæœ¬å·ç»Ÿä¸€ç®¡ç†æ–¹æ¡ˆã€‚é€šè¿‡æ­¤æ–¹æ¡ˆï¼Œ**åªéœ€ä¿®æ”¹ä¸€ä¸ªæ–‡ä»¶å³å¯æ›´æ–°æ•´ä¸ªé¡¹ç›®çš„ç‰ˆæœ¬å·**ã€‚

## ğŸ¯ è®¾è®¡ç›®æ ‡

1. **å•ä¸€æ•°æ®æº**ï¼šç‰ˆæœ¬å·åªåœ¨ `gradle.properties` ä¸­å®šä¹‰
2. **è‡ªåŠ¨åŒæ­¥**ï¼šé€šè¿‡ Gradle ä»»åŠ¡è‡ªåŠ¨åŒæ­¥åˆ°æ‰€æœ‰ç›¸å…³æ–‡ä»¶
3. **æ˜“äºç»´æŠ¤**ï¼šç‰ˆæœ¬è¿­ä»£æ—¶åªéœ€ä¿®æ”¹ä¸€å¤„é…ç½®
4. **æ„å»ºæ—¶ç”Ÿæˆ**ï¼šç‰ˆæœ¬ä¿¡æ¯åœ¨æ„å»ºæ—¶è‡ªåŠ¨æ³¨å…¥åˆ°ä»£ç ä¸­

## ğŸ“ ç‰ˆæœ¬ä¿¡æ¯é…ç½®æ–‡ä»¶

### gradle.propertiesï¼ˆå”¯ä¸€çš„ç‰ˆæœ¬å·æ¥æºï¼‰

```properties
# ==================== æ’ä»¶ç‰ˆæœ¬é…ç½® ====================
# è¿™æ˜¯å…¨å±€å”¯ä¸€çš„ç‰ˆæœ¬å·é…ç½®ï¼Œä¿®æ”¹æ­¤å¤„å³å¯æ›´æ–°æ•´ä¸ªé¡¹ç›®çš„ç‰ˆæœ¬å·
# ç‰ˆæœ¬å·æ ¼å¼ï¼šä¸»ç‰ˆæœ¬å·.æ¬¡ç‰ˆæœ¬å·.ä¿®è®¢å·
pluginVersion=1.1.9

# ç‰ˆæœ¬ç±»å‹ï¼šæ­£å¼ç‰ˆæœ¬ã€å†…æµ‹ç‰ˆæœ¬ã€æµ‹è¯•ç‰ˆæœ¬ç­‰
versionType=å†…æµ‹ç‰ˆæœ¬

# å‘å¸ƒæ—¥æœŸï¼šæ ¼å¼ YYYY-MM-DD
releaseDate=2024-12-21

# å½“å‰ç‰ˆæœ¬ä¸»è¦åŠŸèƒ½æè¿°
currentFeatures=æ¨¡åŠ›æ–¹èˆŸè…¾è®¯æ··å…ƒæ¨¡å‹ç¿»è¯‘ä¸ºé»˜è®¤å€¼
```

## ğŸ”„ ç‰ˆæœ¬å·åŒæ­¥æœºåˆ¶

### 1. Gradle æ„å»ºé…ç½®ï¼ˆbuild.gradleï¼‰

```groovy
// ä» gradle.properties è¯»å–ç‰ˆæœ¬å·
version = pluginVersion
```

### 2. è‡ªåŠ¨ç”Ÿæˆç‰ˆæœ¬ä¿¡æ¯æ–‡ä»¶

æ„å»ºæ—¶è‡ªåŠ¨ç”Ÿæˆ `build/generated-resources/version.properties`ï¼š

```groovy
tasks.register('generateVersionProperties') {
    description = 'ç”Ÿæˆç‰ˆæœ¬ä¿¡æ¯å±æ€§æ–‡ä»¶ï¼Œç”¨äºåœ¨è¿è¡Œæ—¶è¯»å–ç‰ˆæœ¬å·'
    group = 'build'
    
    def outputDir = file("$buildDir/generated-resources")
    outputs.dir outputDir
    
    doLast {
        outputDir.mkdirs()
        def versionFile = new File(outputDir, 'version.properties')
        versionFile.text = """# Auto-generated version information
version=${pluginVersion}
versionType=${versionType}
releaseDate=${releaseDate}
currentFeatures=${currentFeatures}
"""
    }
}
```

### 3. Java ä»£ç è¯»å–ç‰ˆæœ¬ä¿¡æ¯ï¼ˆVersionInfo.javaï¼‰

```java
public final class VersionInfo {
    private static final Properties VERSION_PROPS = new Properties();
    
    static {
        try (InputStream input = VersionInfo.class.getClassLoader()
                .getResourceAsStream("version.properties")) {
            if (input != null) {
                VERSION_PROPS.load(input);
            }
        } catch (IOException e) {
            System.err.println("Error loading version.properties: " + e.getMessage());
        }
    }
    
    public static final String CURRENT_VERSION = VERSION_PROPS.getProperty("version", "1.1.9");
    public static final String VERSION_TYPE = VERSION_PROPS.getProperty("versionType", "å†…æµ‹ç‰ˆæœ¬");
    public static final String RELEASE_DATE = VERSION_PROPS.getProperty("releaseDate", "2024-12-21");
    public static final String CURRENT_FEATURES = VERSION_PROPS.getProperty("currentFeatures", "");
}
```

### 4. è‡ªåŠ¨æ›´æ–° README.md

```groovy
tasks.register('updateReadmeVersion') {
    description = 'è‡ªåŠ¨æ›´æ–° README.md ä¸­çš„ç‰ˆæœ¬å·å¾½ç« '
    group = 'version'
    
    doLast {
        def readmeFile = file('README.md')
        if (readmeFile.exists()) {
            def content = readmeFile.text
            content = content.replaceAll(
                /https:\/\/img\.shields\.io\/badge\/Version-[\d.]+/,
                "https://img.shields.io/badge/Version-${pluginVersion}"
            )
            readmeFile.text = content
        }
    }
}
```

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### ç‰ˆæœ¬æ›´æ–°æµç¨‹

å½“éœ€è¦å‘å¸ƒæ–°ç‰ˆæœ¬æ—¶ï¼ŒæŒ‰ä»¥ä¸‹æ­¥éª¤æ“ä½œï¼š

#### æ­¥éª¤ 1ï¼šä¿®æ”¹ gradle.properties

```properties
pluginVersion=1.2.0          # ä¿®æ”¹ç‰ˆæœ¬å·
versionType=æ­£å¼ç‰ˆæœ¬          # ä¿®æ”¹ç‰ˆæœ¬ç±»å‹
releaseDate=2024-12-25       # ä¿®æ”¹å‘å¸ƒæ—¥æœŸ
currentFeatures=æ–°å¢XXXåŠŸèƒ½   # ä¿®æ”¹åŠŸèƒ½æè¿°
```

#### æ­¥éª¤ 2ï¼šè¿è¡Œç‰ˆæœ¬æ›´æ–°è„šæœ¬

```bash
# ä½¿ç”¨ Python è„šæœ¬ï¼ˆæ¨èï¼‰
python update-version.py

# æˆ–ä½¿ç”¨ PowerShell è„šæœ¬ï¼ˆWindowsï¼‰
.\update-version.ps1

# æˆ–ä½¿ç”¨ Gradle è„šæœ¬
gradlew -b update-version.gradle
```

#### æ­¥éª¤ 3ï¼šéªŒè¯æ›´æ–°ç»“æœ

è¿è¡Œåä¼šè‡ªåŠ¨æ›´æ–°ä»¥ä¸‹æ–‡ä»¶ï¼š
- âœ… `src/main/resources/version.properties` - ç‰ˆæœ¬ä¿¡æ¯æ–‡ä»¶
- âœ… `README.md` - ç‰ˆæœ¬å·å¾½ç« è‡ªåŠ¨æ›´æ–°
- âœ… `VersionInfo.java` - è¿è¡Œæ—¶è‡ªåŠ¨ä» version.properties è¯»å–

#### æ­¥éª¤ 4ï¼šé‡æ–°æ„å»ºé¡¹ç›®

```bash
# Windows
gradlew clean build

# Linux/Mac
./gradlew clean build
```

### å¯ç”¨çš„ Gradle ä»»åŠ¡

| ä»»åŠ¡åç§° | è¯´æ˜ | ä½¿ç”¨åœºæ™¯ |
|---------|------|---------|
| `generateVersionProperties` | ç”Ÿæˆç‰ˆæœ¬ä¿¡æ¯å±æ€§æ–‡ä»¶ | æ„å»ºæ—¶è‡ªåŠ¨æ‰§è¡Œ |
| `updateReadmeVersion` | æ›´æ–° README.md ä¸­çš„ç‰ˆæœ¬å· | ç‰ˆæœ¬æ›´æ–°æ—¶æ‰‹åŠ¨æ‰§è¡Œ |
| `updateVersion` | ä¸€é”®æ›´æ–°æ‰€æœ‰ç‰ˆæœ¬ç›¸å…³æ–‡ä»¶ | **æ¨èä½¿ç”¨** |

### ç¤ºä¾‹è¾“å‡º

è¿è¡Œ `./gradlew updateVersion` åçš„è¾“å‡ºï¼š

```
========================================
ç‰ˆæœ¬æ›´æ–°å®Œæˆï¼
å½“å‰ç‰ˆæœ¬ï¼š1.2.0
ç‰ˆæœ¬ç±»å‹ï¼šæ­£å¼ç‰ˆæœ¬
å‘å¸ƒæ—¥æœŸï¼š2024-12-25
ä¸»è¦åŠŸèƒ½ï¼šæ–°å¢XXXåŠŸèƒ½
========================================
å·²æ›´æ–°çš„æ–‡ä»¶ï¼š
1. build/generated-resources/version.properties
2. README.md

æ³¨æ„äº‹é¡¹ï¼š
- ç‰ˆæœ¬å·å·²ä» gradle.properties åŒæ­¥åˆ°æ‰€æœ‰ç›¸å…³æ–‡ä»¶
- VersionInfo.java å°†åœ¨ä¸‹æ¬¡ç¼–è¯‘æ—¶è‡ªåŠ¨ä» version.properties è¯»å–ç‰ˆæœ¬ä¿¡æ¯
- å¦‚éœ€å‘å¸ƒæ–°ç‰ˆæœ¬ï¼Œè¯·å…ˆä¿®æ”¹ gradle.properties ä¸­çš„ç‰ˆæœ¬ä¿¡æ¯ï¼Œç„¶åè¿è¡Œï¼š./gradlew updateVersion
========================================
```

## ğŸ“Š ç‰ˆæœ¬å·ç®¡ç†æµç¨‹å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  gradle.properties      â”‚  â† å”¯ä¸€çš„ç‰ˆæœ¬å·æ¥æºï¼ˆæ‰‹åŠ¨ä¿®æ”¹ï¼‰
â”‚  - pluginVersion        â”‚
â”‚  - versionType          â”‚
â”‚  - releaseDate          â”‚
â”‚  - currentFeatures      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚                                  â”‚
            â–¼                                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  build.gradle           â”‚      â”‚  Gradle Task:           â”‚
â”‚  version = pluginVersionâ”‚      â”‚  generateVersionProps   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                             â”‚
                                             â–¼
                                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                 â”‚  version.properties     â”‚
                                 â”‚  (è‡ªåŠ¨ç”Ÿæˆ)              â”‚
                                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                             â”‚
                                             â–¼
                                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                 â”‚  VersionInfo.java       â”‚
                                 â”‚  (è¿è¡Œæ—¶è¯»å–)            â”‚
                                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Gradle Task:           â”‚
â”‚  updateReadmeVersion    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  README.md              â”‚
â”‚  (è‡ªåŠ¨æ›´æ–°ç‰ˆæœ¬å¾½ç« )      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## âœ… ä¼˜åŠ¿

1. **å•ä¸€æ•°æ®æº**ï¼šæ‰€æœ‰ç‰ˆæœ¬ä¿¡æ¯éƒ½æ¥è‡ª `gradle.properties`
2. **è‡ªåŠ¨åŒ–**ï¼šé€šè¿‡ Gradle ä»»åŠ¡è‡ªåŠ¨åŒæ­¥ï¼Œå‡å°‘äººä¸ºé”™è¯¯
3. **ç±»å‹å®‰å…¨**ï¼šJava ä»£ç ä¸­çš„ç‰ˆæœ¬ä¿¡æ¯é€šè¿‡ Properties æ–‡ä»¶åŠ è½½ï¼Œæ”¯æŒé»˜è®¤å€¼
4. **æ˜“äºç»´æŠ¤**ï¼šç‰ˆæœ¬æ›´æ–°åªéœ€ä¿®æ”¹ä¸€ä¸ªæ–‡ä»¶ï¼Œè¿è¡Œä¸€ä¸ªå‘½ä»¤
5. **æ„å»ºé›†æˆ**ï¼šç‰ˆæœ¬ä¿¡æ¯åœ¨æ„å»ºæ—¶è‡ªåŠ¨ç”Ÿæˆï¼Œç¡®ä¿ä¸€è‡´æ€§
6. **å‘åå…¼å®¹**ï¼šå¦‚æœ version.properties ä¸å­˜åœ¨ï¼Œä½¿ç”¨é»˜è®¤å€¼ä¿è¯åŠŸèƒ½å¯ç”¨

## ğŸ”§ æ•…éšœæ’é™¤

### é—®é¢˜ 1ï¼šVersionInfo.java è¯»å–ä¸åˆ°ç‰ˆæœ¬ä¿¡æ¯

**åŸå› **ï¼šversion.properties æ–‡ä»¶æœªç”Ÿæˆ

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
./gradlew clean build
```

### é—®é¢˜ 2ï¼šREADME.md ç‰ˆæœ¬å·æœªæ›´æ–°

**åŸå› **ï¼šæœªè¿è¡Œ updateReadmeVersion ä»»åŠ¡

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
./gradlew updateVersion
```

### é—®é¢˜ 3ï¼šæ„å»ºåç‰ˆæœ¬å·ä»ç„¶æ˜¯æ—§ç‰ˆæœ¬

**åŸå› **ï¼š
1. gradle.properties æœªæ­£ç¡®ä¿®æ”¹
2. ç¼“å­˜é—®é¢˜

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
./gradlew clean
./gradlew updateVersion
./gradlew build
```

## ğŸ“ æœ€ä½³å®è·µ

1. **ç‰ˆæœ¬æ›´æ–°å‰**ï¼š
   - ç¡®ä¿æ‰€æœ‰ä»£ç å·²æäº¤
   - æ›´æ–°ç‰ˆæœ¬å†å²æ–‡æ¡£
   - å‡†å¤‡å¥½ Release Notes

2. **ç‰ˆæœ¬æ›´æ–°æ—¶**ï¼š
   - ä¿®æ”¹ `gradle.properties` ä¸­çš„æ‰€æœ‰ç‰ˆæœ¬ç›¸å…³å­—æ®µ
   - è¿è¡Œ `./gradlew updateVersion`
   - éªŒè¯æ‰€æœ‰æ–‡ä»¶éƒ½å·²æ­£ç¡®æ›´æ–°

3. **ç‰ˆæœ¬æ›´æ–°å**ï¼š
   - è¿è¡Œå®Œæ•´æµ‹è¯•
   - æäº¤æ‰€æœ‰æ›´æ”¹çš„æ–‡ä»¶
   - åˆ›å»º Git Tagï¼š`git tag v1.2.0`
   - æ¨é€åˆ°è¿œç¨‹ï¼š`git push origin v1.2.0`

## ğŸ‰ æ€»ç»“

é€šè¿‡è¿™å¥—ç‰ˆæœ¬å·ç»Ÿä¸€ç®¡ç†æ–¹æ¡ˆï¼ŒPandaCoder é¡¹ç›®å®ç°äº†ï¼š
- âœ… ç‰ˆæœ¬å·çš„å•ä¸€æ•°æ®æºç®¡ç†
- âœ… è‡ªåŠ¨åŒ–çš„ç‰ˆæœ¬åŒæ­¥æœºåˆ¶
- âœ… ç®€åŒ–çš„ç‰ˆæœ¬æ›´æ–°æµç¨‹
- âœ… å‡å°‘äººä¸ºé”™è¯¯çš„å¯èƒ½æ€§

**è®°ä½**ï¼šæ¯æ¬¡ç‰ˆæœ¬æ›´æ–°ï¼Œåªéœ€ä¸¤æ­¥ï¼š
1. ä¿®æ”¹ `gradle.properties`
2. è¿è¡Œ `./gradlew updateVersion`

å°±è¿™ä¹ˆç®€å•ï¼ğŸŠ

