# ç‰ˆæœ¬å·ç»Ÿä¸€ç®¡ç†å®ç°æ€»ç»“

## ğŸ“‹ é¡¹ç›®èƒŒæ™¯

PandaCoder é¡¹ç›®åœ¨ 1.1.9 ç‰ˆæœ¬ä¹‹å‰ï¼Œç‰ˆæœ¬å·åˆ†æ•£åœ¨å¤šä¸ªæ–‡ä»¶ä¸­ï¼š
- `build.gradle` - é¡¹ç›®ç‰ˆæœ¬å·
- `VersionInfo.java` - ä»£ç ä¸­çš„ç‰ˆæœ¬å¸¸é‡
- `README.md` - ç‰ˆæœ¬å¾½ç« 
- å„ç§æ–‡æ¡£ä¸­çš„ç‰ˆæœ¬å¼•ç”¨

æ¯æ¬¡ç‰ˆæœ¬æ›´æ–°éœ€è¦æ‰‹åŠ¨ä¿®æ”¹å¤šä¸ªæ–‡ä»¶ï¼Œå®¹æ˜“é—æ¼æˆ–å‡ºé”™ã€‚

## ğŸ¯ å®ç°ç›®æ ‡

å®ç°**å•ä¸€æ•°æ®æº**çš„ç‰ˆæœ¬å·ç®¡ç†æ–¹æ¡ˆï¼š
1. âœ… åªéœ€ä¿®æ”¹ä¸€ä¸ªæ–‡ä»¶ï¼ˆ`gradle.properties`ï¼‰
2. âœ… è‡ªåŠ¨åŒæ­¥åˆ°æ‰€æœ‰ç›¸å…³æ–‡ä»¶
3. âœ… è¿è¡Œæ—¶åŠ¨æ€è¯»å–ç‰ˆæœ¬ä¿¡æ¯
4. âœ… ç®€å•æ˜“ç”¨çš„æ›´æ–°æµç¨‹

## ğŸ—ï¸ æ¶æ„è®¾è®¡

### 1. ç‰ˆæœ¬é…ç½®ä¸­å¿ƒï¼šgradle.properties

```properties
# ==================== æ’ä»¶ç‰ˆæœ¬é…ç½® ====================
# è¿™æ˜¯å…¨å±€å”¯ä¸€çš„ç‰ˆæœ¬å·é…ç½®ï¼Œä¿®æ”¹æ­¤å¤„å³å¯æ›´æ–°æ•´ä¸ªé¡¹ç›®çš„ç‰ˆæœ¬å·
pluginVersion=1.1.9
versionType=å†…æµ‹ç‰ˆæœ¬
releaseDate=2024-12-21
currentFeatures=æ¨¡åŠ›æ–¹èˆŸè…¾è®¯æ··å…ƒæ¨¡å‹ç¿»è¯‘ä¸ºé»˜è®¤å€¼
```

### 2. Gradle é›†æˆ

`build.gradle` ä» `gradle.properties` è¯»å–ç‰ˆæœ¬å·ï¼š

```groovy
group = 'com.shuyixiao'
version = pluginVersion  // ä» gradle.properties è¯»å–
```

### 3. è¿è¡Œæ—¶ç‰ˆæœ¬è¯»å–

`VersionInfo.java` ä» `version.properties` æ–‡ä»¶è¯»å–ç‰ˆæœ¬ä¿¡æ¯ï¼š

```java
public final class VersionInfo {
    private static final Properties VERSION_PROPS = new Properties();
    
    static {
        try (InputStream input = VersionInfo.class.getClassLoader()
                .getResourceAsStream("version.properties")) {
            if (input != null) {
                VERSION_PROPS.load(input);
            }
        } catch (IOException e) {
            // é”™è¯¯å¤„ç†
        }
    }
    
    public static final String CURRENT_VERSION = 
        VERSION_PROPS.getProperty("version", "1.1.9");
}
```

### 4. è‡ªåŠ¨åŒ–æ›´æ–°è„šæœ¬

æä¾›ä¸‰ç§æ›´æ–°è„šæœ¬ï¼š

#### Python è„šæœ¬ï¼ˆæ¨èï¼‰
- è·¨å¹³å°æ”¯æŒ
- ç®€å•å¯é 
- è¾“å‡ºå‹å¥½

#### PowerShell è„šæœ¬
- Windows åŸç”Ÿæ”¯æŒ
- å½©è‰²è¾“å‡º
- é€‚åˆ Windows å¼€å‘è€…

#### Gradle è„šæœ¬
- ä¸æ„å»ºç³»ç»Ÿé›†æˆ
- æ— éœ€é¢å¤–ä¾èµ–
- é€‚åˆ CI/CD

## ğŸ“ æ–‡ä»¶ç»“æ„

```
PandaCoder/
â”œâ”€â”€ gradle.properties                    # ç‰ˆæœ¬é…ç½®ä¸­å¿ƒï¼ˆå”¯ä¸€æ•°æ®æºï¼‰
â”œâ”€â”€ build.gradle                         # è¯»å–ç‰ˆæœ¬å·
â”œâ”€â”€ update-version.py                    # Python æ›´æ–°è„šæœ¬
â”œâ”€â”€ update-version.ps1                   # PowerShell æ›´æ–°è„šæœ¬
â”œâ”€â”€ update-version.gradle                # Gradle æ›´æ–°è„šæœ¬
â”œâ”€â”€ VERSION_UPDATE_GUIDE.md              # å¿«é€Ÿä½¿ç”¨æŒ‡å—
â”œâ”€â”€ src/
â”‚   â””â”€â”€ main/
â”‚       â”œâ”€â”€ java/
â”‚       â”‚   â””â”€â”€ com/shuyixiao/version/
â”‚       â”‚       â””â”€â”€ VersionInfo.java     # è¿è¡Œæ—¶è¯»å–ç‰ˆæœ¬
â”‚       â””â”€â”€ resources/
â”‚           â””â”€â”€ version.properties       # ç‰ˆæœ¬ä¿¡æ¯æ–‡ä»¶ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
â”œâ”€â”€ docs/
â”‚   â”œâ”€â”€ ç‰ˆæœ¬å·ç»Ÿä¸€ç®¡ç†æ–¹æ¡ˆ.md             # è¯¦ç»†æŠ€æœ¯æ–‡æ¡£
â”‚   â””â”€â”€ ç‰ˆæœ¬å·ç»Ÿä¸€ç®¡ç†å®ç°æ€»ç»“.md         # æœ¬æ–‡æ¡£
â””â”€â”€ README.md                            # ç‰ˆæœ¬å¾½ç« ï¼ˆè‡ªåŠ¨æ›´æ–°ï¼‰
```

## ğŸ”„ ç‰ˆæœ¬æ›´æ–°æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1. ä¿®æ”¹ gradle.properties                   â”‚
â”‚     - pluginVersion=1.2.0                   â”‚
â”‚     - versionType=æ­£å¼ç‰ˆæœ¬                   â”‚
â”‚     - releaseDate=2025-01-01                â”‚
â”‚     - currentFeatures=æ–°åŠŸèƒ½æè¿°             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  2. è¿è¡Œæ›´æ–°è„šæœ¬                              â”‚
â”‚     python update-version.py                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚                         â”‚
                   â–¼                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ›´æ–° version.properties  â”‚  â”‚  æ›´æ–° README.md          â”‚
â”‚  version=1.2.0           â”‚  â”‚  Version-1.2.0 å¾½ç«       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  3. é‡æ–°æ„å»ºé¡¹ç›®                              â”‚
â”‚     gradlew clean build                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  4. éªŒè¯ç»“æœ                                  â”‚
â”‚     - VersionInfo.CURRENT_VERSION = "1.2.0" â”‚
â”‚     - PandaCoder-1.2.0.jar                  â”‚
â”‚     - README.md å¾½ç« æ˜¾ç¤º 1.2.0               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  5. æäº¤åˆ° Git                                â”‚
â”‚     git add .                               â”‚
â”‚     git commit -m "chore: v1.2.0"           â”‚
â”‚     git tag v1.2.0                          â”‚
â”‚     git push && git push --tags             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## âœ¨ æ ¸å¿ƒç‰¹æ€§

### 1. å•ä¸€æ•°æ®æº
- æ‰€æœ‰ç‰ˆæœ¬ä¿¡æ¯éƒ½æ¥è‡ª `gradle.properties`
- é¿å…å¤šå¤„ç»´æŠ¤å¯¼è‡´çš„ä¸ä¸€è‡´

### 2. è‡ªåŠ¨åŒ–åŒæ­¥
- è¿è¡Œè„šæœ¬è‡ªåŠ¨æ›´æ–°æ‰€æœ‰ç›¸å…³æ–‡ä»¶
- å‡å°‘äººä¸ºé”™è¯¯

### 3. è¿è¡Œæ—¶åŠ¨æ€è¯»å–
- `VersionInfo.java` ä»é…ç½®æ–‡ä»¶è¯»å–
- æ— éœ€é‡æ–°ç¼–è¯‘ Java ä»£ç 

### 4. å¤šè„šæœ¬æ”¯æŒ
- Pythonã€PowerShellã€Gradle ä¸‰ç§æ–¹å¼
- é€‚åº”ä¸åŒå¼€å‘ç¯å¢ƒ

### 5. å®Œå–„çš„æ–‡æ¡£
- å¿«é€Ÿä½¿ç”¨æŒ‡å—
- è¯¦ç»†æŠ€æœ¯æ–‡æ¡£
- æ•…éšœæ’é™¤æŒ‡å—

## ğŸ“ æŠ€æœ¯äº®ç‚¹

### 1. Properties æ–‡ä»¶åŠ è½½
ä½¿ç”¨ Java æ ‡å‡† API åŠ è½½é…ç½®æ–‡ä»¶ï¼š
```java
Properties props = new Properties();
try (InputStream input = getClass().getClassLoader()
        .getResourceAsStream("version.properties")) {
    props.load(input);
}
```

### 2. Gradle å±æ€§ä¼ é€’
é€šè¿‡ `gradle.properties` å®šä¹‰çš„å±æ€§å¯ä»¥åœ¨ `build.gradle` ä¸­ç›´æ¥ä½¿ç”¨ï¼š
```groovy
version = pluginVersion  // è‡ªåŠ¨ä» gradle.properties è¯»å–
```

### 3. æ­£åˆ™è¡¨è¾¾å¼æ›¿æ¢
ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æ›´æ–° README.md ä¸­çš„ç‰ˆæœ¬å·ï¼š
```python
content = re.sub(
    r'https://img\.shields\.io/badge/Version-[\d.]+',
    f'https://img.shields.io/badge/Version-{plugin_version}',
    content
)
```

### 4. è·¨å¹³å°ç¼–ç å¤„ç†
å¤„ç† Windows æ§åˆ¶å°ç¼–ç é—®é¢˜ï¼š
```python
if sys.platform == 'win32':
    sys.stdout = io.TextIOWrapper(sys.stdout.buffer, encoding='utf-8')
```

## ğŸ“Š å®æ–½æ•ˆæœ

### æ›´æ–°å‰
- âŒ éœ€è¦æ‰‹åŠ¨ä¿®æ”¹ 5+ ä¸ªæ–‡ä»¶
- âŒ å®¹æ˜“é—æ¼æˆ–å‡ºé”™
- âŒ ç‰ˆæœ¬ä¿¡æ¯ä¸ä¸€è‡´
- âŒ è€—æ—¶çº¦ 10-15 åˆ†é’Ÿ

### æ›´æ–°å
- âœ… åªéœ€ä¿®æ”¹ 1 ä¸ªæ–‡ä»¶
- âœ… è¿è¡Œ 1 æ¡å‘½ä»¤
- âœ… è‡ªåŠ¨åŒæ­¥æ‰€æœ‰æ–‡ä»¶
- âœ… è€—æ—¶çº¦ 1-2 åˆ†é’Ÿ

**æ•ˆç‡æå‡ï¼š80%+**

## ğŸ”§ ä½¿ç”¨ç¤ºä¾‹

### ç¤ºä¾‹ 1ï¼šå‘å¸ƒæ­£å¼ç‰ˆæœ¬

```bash
# 1. ä¿®æ”¹ gradle.properties
# pluginVersion=2.0.0
# versionType=æ­£å¼ç‰ˆæœ¬
# releaseDate=2025-02-01
# currentFeatures=é‡å¤§åŠŸèƒ½æ›´æ–°

# 2. è¿è¡Œæ›´æ–°è„šæœ¬
python update-version.py

# 3. æ„å»ºå¹¶éªŒè¯
gradlew clean build

# 4. æäº¤
git add .
git commit -m "chore: release v2.0.0"
git tag v2.0.0
git push && git push --tags
```

### ç¤ºä¾‹ 2ï¼šå‘å¸ƒå†…æµ‹ç‰ˆæœ¬

```bash
# 1. ä¿®æ”¹ gradle.properties
# pluginVersion=1.1.10-beta
# versionType=å†…æµ‹ç‰ˆæœ¬
# releaseDate=2024-12-25
# currentFeatures=æ–°åŠŸèƒ½æµ‹è¯•

# 2. è¿è¡Œæ›´æ–°è„šæœ¬
python update-version.py

# 3. æ„å»º
gradlew clean build
```

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **å¿…é¡»è¿è¡Œè„šæœ¬**ï¼šä¿®æ”¹ `gradle.properties` åå¿…é¡»è¿è¡Œæ›´æ–°è„šæœ¬
2. **é‡æ–°æ„å»º**ï¼šæ›´æ–°åéœ€è¦è¿è¡Œ `gradlew clean build`
3. **æäº¤æ‰€æœ‰æ–‡ä»¶**ï¼šç¡®ä¿æäº¤æ‰€æœ‰è¢«æ›´æ–°çš„æ–‡ä»¶
4. **ç‰ˆæœ¬å·æ ¼å¼**ï¼šéµå¾ªè¯­ä¹‰åŒ–ç‰ˆæœ¬è§„èŒƒï¼ˆä¸»ç‰ˆæœ¬å·.æ¬¡ç‰ˆæœ¬å·.ä¿®è®¢å·ï¼‰

## ğŸš€ æœªæ¥æ”¹è¿›

1. **Git Hooks é›†æˆ**ï¼šåœ¨ commit å‰è‡ªåŠ¨æ£€æŸ¥ç‰ˆæœ¬ä¸€è‡´æ€§
2. **CI/CD é›†æˆ**ï¼šåœ¨æ„å»ºæµç¨‹ä¸­è‡ªåŠ¨éªŒè¯ç‰ˆæœ¬å·
3. **ç‰ˆæœ¬å·è‡ªåŠ¨é€’å¢**ï¼šæä¾›è‡ªåŠ¨é€’å¢ç‰ˆæœ¬å·çš„é€‰é¡¹
4. **å˜æ›´æ—¥å¿—ç”Ÿæˆ**ï¼šæ ¹æ® Git æäº¤è‡ªåŠ¨ç”Ÿæˆ CHANGELOG

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [VERSION_UPDATE_GUIDE.md](../VERSION_UPDATE_GUIDE.md) - å¿«é€Ÿä½¿ç”¨æŒ‡å—
- [ç‰ˆæœ¬å·ç»Ÿä¸€ç®¡ç†æ–¹æ¡ˆ.md](ç‰ˆæœ¬å·ç»Ÿä¸€ç®¡ç†æ–¹æ¡ˆ.md) - è¯¦ç»†æŠ€æœ¯æ–‡æ¡£

## ğŸ‰ æ€»ç»“

é€šè¿‡å®æ–½ç‰ˆæœ¬å·ç»Ÿä¸€ç®¡ç†æ–¹æ¡ˆï¼ŒPandaCoder é¡¹ç›®å®ç°äº†ï¼š

1. âœ… **ç®€åŒ–æµç¨‹**ï¼šä»å¤šæ­¥éª¤æ‰‹åŠ¨æ“ä½œç®€åŒ–ä¸ºå•å‘½ä»¤è‡ªåŠ¨åŒ–
2. âœ… **æé«˜æ•ˆç‡**ï¼šç‰ˆæœ¬æ›´æ–°æ—¶é—´ä» 10-15 åˆ†é’Ÿé™ä½åˆ° 1-2 åˆ†é’Ÿ
3. âœ… **å‡å°‘é”™è¯¯**ï¼šé¿å…æ‰‹åŠ¨ä¿®æ”¹å¯¼è‡´çš„ç‰ˆæœ¬ä¸ä¸€è‡´
4. âœ… **æ˜“äºç»´æŠ¤**ï¼šæ¸…æ™°çš„æ–‡æ¡£å’Œç®€å•çš„ä½¿ç”¨æ–¹å¼
5. âœ… **å¼€å‘ä½“éªŒ**ï¼šæä¾›å¤šç§è„šæœ¬é€‚åº”ä¸åŒå¼€å‘ç¯å¢ƒ

**ç‰ˆæœ¬ç®¡ç†ï¼Œä»æ­¤ç®€å•ï¼** ğŸš€

---

**å®æ–½æ—¥æœŸ**ï¼š2024-12-21  
**å½“å‰ç‰ˆæœ¬**ï¼š1.1.9  
**æ–‡æ¡£ç‰ˆæœ¬**ï¼š1.0

