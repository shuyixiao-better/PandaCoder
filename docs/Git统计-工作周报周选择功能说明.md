# Git 统计 - 工作周报周选择功能说明

## 📝 功能概述

工作周报功能现已支持**可视化日历选择器**，可以方便地选择任意一周的提交记录，不再局限于本周。

## ✨ 新增功能

### 1. 📅 可视化日历选择器

- **日历界面**：提供直观的月历视图，可以清晰看到每个月的日期布局
- **周高亮显示**：选中的周会以蓝色背景高亮显示
- **今日标记**：当天日期会有蓝色边框标识
- **月份切换**：支持前后月份快速切换
- **鼠标提示**：鼠标悬停在日期上会显示该周的完整时间范围

### 2. 🎯 快捷选择按钮

- **📅 选择按钮**：点击打开可视化日历选择器
- **本周按钮**：一键快速选择本周
- **上周按钮**：一键快速选择上周

### 3. 📊 优化的提交日志显示

提交日志现在采用更友好的格式显示：

```
╔════════════════════════════════════════════════════════════════╗
║                        📊 提交统计                              ║
╚════════════════════════════════════════════════════════════════╝

📅 时间范围：2025-01-06 至 2025-01-12
👤 筛选作者：全部作者
📝 提交数量：15 次

════════════════════════════════════════════════════════════════
                           📋 提交记录                           
════════════════════════════════════════════════════════════════

2025-01-10 14:30:00 | 张三 | 修复登录bug
2025-01-10 10:15:00 | 李四 | 添加用户管理功能
...
```

### 4. 📋 复制功能增强

- **复制提交日志**：在提交日志区域新增"复制提交日志"按钮，可一键复制格式化的提交记录
- **复制周报**：原有的复制周报功能保持不变

### 5. 🏷️ 动态标签更新

- 提交日志区域的标签会动态显示选中周的时间范围
- 例如：`提交日志 (2025-01-06 至 2025-01-12):`

## 🚀 使用步骤

### 方式一：使用日历选择器（推荐）

1. 在工作周报标签页，点击 **📅 选择** 按钮
2. 在弹出的日历对话框中：
   - 使用 **◀** 和 **▶** 按钮切换月份
   - 点击任意日期，该日期所在的周会被选中（蓝色高亮）
   - 鼠标悬停可查看该周的完整时间范围
3. 点击 **OK** 确认选择
4. 点击 **加载提交** 按钮加载该周的提交记录

### 方式二：使用快捷按钮

1. 点击 **本周** 按钮快速选择本周
2. 或点击 **上周** 按钮快速选择上周
3. 点击 **加载提交** 按钮加载提交记录

### 查看和复制提交日志

1. 加载完成后，左侧会显示格式化的提交日志
2. 点击 **复制提交日志** 按钮可将内容复制到剪贴板
3. 可以直接粘贴到其他文档或工具中

### 生成周报

1. 确保已加载提交日志
2. 配置好 AI API 信息（首次使用需要配置）
3. 点击 **生成周报** 按钮
4. 等待 AI 生成周报内容
5. 点击 **复制周报** 按钮复制生成的周报

## 🎨 界面说明

### 日历选择器界面

```
┌─────────────────────────────────────┐
│  ◀        2025年01月         ▶      │
├─────────────────────────────────────┤
│  一  二  三  四  五  六  日          │
│              1   2   3   4   5      │
│  6   7   8   9  10  11  12          │  ← 蓝色高亮表示选中的周
│ 13  14  15  16  17  18  19          │
│ 20  21  22  23  24  25  26          │
│ 27  28  29  30  31                  │
├─────────────────────────────────────┤
│  点击任意日期选择该日期所在的周      │
└─────────────────────────────────────┘
```

### 周选择区域

```
选择周: [2025-01-06] [📅 选择] [本周] [上周]
```

## 💡 使用技巧

1. **快速查看历史周报**：使用日历选择器可以快速查看任意历史周的提交情况
2. **对比不同周**：可以分别加载不同周的提交，进行对比分析
3. **跨月选择**：日历支持跨月选择，方便查看月初或月末的周
4. **作者筛选**：配合作者筛选功能，可以查看特定作者在某一周的提交
5. **格式化输出**：复制的提交日志已经格式化，可以直接用于文档或报告

## 🔧 技术实现

### 核心组件

- **WeekPickerDialog**：自定义的周选择器对话框组件
  - 提供可视化的月历视图
  - 支持周的选择和高亮显示
  - 支持月份切换和今日标记

### 服务层改进

- **GitWeeklyReportService.getCommitsByDateRange()**：新增方法支持自定义日期范围
  - 参数：startDate（周一）、endDate（周日）、authorFilter（可选）
  - 返回：格式化的提交日志字符串

### UI 改进

- 日期输入框改为只读，防止手动输入错误格式
- 新增日历选择按钮，提供可视化选择
- 动态更新标签显示选中周的时间范围
- 新增复制提交日志按钮

## 📌 注意事项

1. **周的定义**：系统以周一为一周的开始，周日为结束
2. **日期验证**：选择的日期必须是周一，系统会自动验证
3. **时间范围**：提交记录包含选中周的周一 00:00:00 到周日 23:59:59
4. **空记录提示**：如果选中周没有提交记录，会显示友好的提示信息

## 🎯 后续优化建议

- [ ] 支持自定义日期范围（不限于周）
- [ ] 添加周数显示（例如：2025年第2周）
- [ ] 支持键盘快捷键操作日历
- [ ] 添加最近选择的周的历史记录
- [ ] 支持导出多周的汇总报告

